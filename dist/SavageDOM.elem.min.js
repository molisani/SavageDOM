!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.SavageDOM=b()}):"object"==typeof module&&module.exports?module.exports=b():a.SavageDOM=b()}(this,function(){var a,b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};!function(a){a.XMLNS="http://www.w3.org/2000/svg",a.XLINK="http://www.w3.org/1999/xlink"}(a||(a={}));var a;!function(a){}(a||(a={})),function(a){var b;!function(a){a.isAttribute=function(a){return"function"==typeof a.interpolate&&"function"==typeof a.parse},a._LengthParse=function(b){var c=b.match(/(\d+|\d+\.\d+)(\w+|%)/i);return null!==c?new a.Dimension(parseFloat(c[1]),c[2]):parseFloat(b)},a._LengthInterpolate=function(b,c,d){return"number"!=typeof b?"number"!=typeof c?c.interpolate(b,d):b.interpolate(new a.Dimension(c,b.unit),1-d):"number"!=typeof c?c.interpolate(new a.Dimension(b,c.unit),d):a._lerp(b,c,d)}}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){a._lerp=function(a,b,c){return a+(b-a)*c};var c=function(){function a(){}return a}(),d=function(c){function d(a,b,d,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=1);var f=c.call(this)||this;if(f.r=0,f.g=0,f.b=0,f.a=1,"string"==typeof a){var g=a.match(/^rgba\s*?\(\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(0|0\.\d*|1|1.0*)\s*?\)$/i);null!==g&&(f.r=parseInt(g[1],10),f.g=parseInt(g[2],10),f.b=parseInt(g[3],10),f.a=parseFloat(g[4]));var h=a.match(/^rgb\s*?\(\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?\)$/i);null!==h&&(f.r=parseInt(h[1],10),f.g=parseInt(h[2],10),f.b=parseInt(h[3],10))}else f.r=a,f.g=b,f.b=d,f.a=e;return f}return b(d,c),d.prototype.toString=function(){return"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.a+")"},d.prototype.toHSL=function(){var a,b,c=this.r/255,d=this.g/255,f=this.b/255,g=Math.max(c,d,f),h=Math.min(c,d,f),i=(g+h)/2,j=g-h,k=i;if(0===j)a=0,b=0;else{switch(b=j/(1-Math.abs(2*i-1)),g){case c:a=(d-f)/j%6;break;case d:a=(f-c)/j+2;break;case f:a=(c-d)/j+4;break;default:a=0}a*=60}return new e(a,b,k)},d.prototype.interpolate=function(b,c,f){var g=f.substr(0,3);if("rgb"===g){if(b instanceof e&&(b=b.toRGB()),b instanceof d)return new d(a._lerp(b.r,this.r,c),a._lerp(b.g,this.g,c),a._lerp(b.b,this.b,c),a._lerp(b.a,this.a,c))}else if("hsl"===g)return this.toHSL().interpolate(b,c,f);return this},d}(c),e=function(c){function e(a,b,d,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=1);var f=c.call(this)||this;if(f.h=0,f.s=0,f.l=0,f.a=1,"string"==typeof a){var g=a.match(/^hsla\s*?\(\s*?(000|0?\d{1,2}|[1-2]\d\d|3[0-5]\d|360)\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?,\s*?(0|0\.\d*|1|1.0*)\s*?\)$/i);null!==g&&(f.h=parseFloat(g[1]),f.s=parseFloat(g[2])/100,f.l=parseFloat(g[3])/100,f.a=parseFloat(g[4]));var h=a.match(/^hsl\s*?\(\s*?(000|0?\d{1,2}|[1-2]\d\d|3[0-5]\d|360)\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?\)$/i);null!==h&&(f.h=parseFloat(h[1]),f.s=parseFloat(h[2])/100,f.l=parseFloat(h[3])/100)}else f.h=a,f.s=b,f.l=d,f.a=e;return f}return b(e,c),e.prototype.toString=function(){return"hsla("+this.h%360+", "+100*this.s+"%, "+100*this.l+"%, "+this.a+")"},e.prototype.toRGB=function(){var a=0,b=0,c=0;if(0!==this.s){var e=(1-Math.abs(2*this.l-1))*this.s,f=e*(1-Math.abs(this.h/60%2-1));this.h<60?(a=e,b=f):this.h<120?(a=f,b=e):this.h<180?(b=e,c=f):this.h<240?(b=f,c=e):this.h<180?(c=e,a=f):this.h<240&&(c=f,a=e);var g=this.l-.5*e;a+=g,b+=g,c+=g}return new d(255*a,255*b,255*c)},e.prototype.interpolate=function(b,c,f){var g=f.substr(0,3);if("hsl"===g){if(b instanceof d&&(b=b.toHSL()),b instanceof e){var h=b.h,i=this.h,j=h-i;return Math.abs(j)>180?"hsl-shortest"===f&&(j<0?h+=360:j>0&&(i+=360)):"hsl-longest"===f&&(j<0?h+=360:j>0&&(i+=360)),j>0&&"hsl-clockwise"===f&&(i+=360),j<0&&"hsl-counterclockwise"===f&&(h+=360),new e(a._lerp(h,i,c)%360,a._lerp(b.s,this.s,c),a._lerp(b.l,this.l,c),a._lerp(b.a,this.a,c))}}else if("rgb"===g)return this.toRGB().interpolate(b,c,f);return this},e}(c),f=function(){function a(b,c,f,g,h){if(void 0===c&&(c=0),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=1),this.mode=a.DEFAULT_MODE,"rgb"===b)this.impl=new d(c,f,g,h);else if("hsl"===b)this.impl=new e(c,f,g,h);else if(void 0!==b)if(0===b.indexOf("rgb"))this.impl=new d(b);else if(0===b.indexOf("hsl"))this.impl=new e(b);else if(0===b.indexOf("#")){var i=0,j=0,k=0,l=b.match(/^#([0-9a-fA-F]{3})$/i);null!==l?(i=17*parseInt(l[1].charAt(0),16),j=17*parseInt(l[1].charAt(1),16),k=17*parseInt(l[1].charAt(2),16)):(l=b.match(/^#([0-9a-fA-F]{6})$/i),null!==l&&(i=parseInt(l[1].substr(0,2),16),j=parseInt(l[1].substr(2,2),16),k=parseInt(l[1].substr(4,2),16))),this.impl=new d(i,j,k)}}return a.prototype.toString=function(){return this.impl.toString()},a.prototype.parse=function(b){return null!==b?new a(b):new a},a.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},a.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},a.prototype.interpolate=function(b,c){var d=new a;return d.impl=this.impl.interpolate(b.impl,c,this.mode),d.mode=this.mode,d},a}();f.DEFAULT_MODE="rgb",a.Color=f}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(a){void 0===a&&(a=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,0]]),this.type="matrix",this.arr=[],this.arr=(b=this.arr).concat.apply(b,a);var b}return b.prototype.parse=function(a){return new b(null!==a?[a.split(" ").map(parseFloat)]:[])},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b([this.arr.map(function(b,e){return a._lerp(c[e],b,d)})])},b}();b.Raw=c;var d=function(){function b(a){void 0===a&&(a=1),this.value=a,this.type="saturate"}return b.prototype.toString=function(){return this.value.toString()},b.prototype.parse=function(a){return null!==a?new b(parseFloat(a)):new b},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._lerp(c.value,this.value,d))},b}();b.Saturate=d;var e=function(){function b(a){void 0===a&&(a=0),this.value=a,this.type="hueRotate"}return b.prototype.toString=function(){return this.value.toString()},b.prototype.parse=function(a){return null!==a?new b(parseFloat(a)):new b},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._lerp(c.value,this.value,d))},b}();b.HueRotate=e;var f=function(){function a(){this.type="luminanceToAlpha"}return a.prototype.toString=function(){return""},a}();b.LuminanceToAlphaColorMatrix=f}(b=a.ColorMatrix||(a.ColorMatrix={}))}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(){function b(a,b){this.value=a,this.unit=b}return b.prototype.toString=function(){return""+this.value+this.unit},b.prototype.parse=function(a){if(null!==a){var c=a.match(/(\d+|\d+\.\d+)(\w+|%)/i);if(null!==c){var d=b.convert[c[2]],e=1/b.convert[this.unit];return void 0!==d&&void 0!==e?new b(parseFloat(c[1])*d*e,this.unit):new b(parseFloat(c[1]),c[2])}return new b(parseFloat(a),this.unit)}return new b(0,this.unit)},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){if(this.unit!==c.unit){var e=b.convert[this.unit],f=1/b.convert[c.unit];if(void 0!==e&&void 0!==f)return new b(a._lerp(c.value,this.value,d)*e*f,this.unit)}return new b(a._lerp(c.value,this.value,d),this.unit)},b}();c.convert={px:1,in:96,cm:254/96,mm:25.4/96,pt:.75,pc:9,deg:1,grad:.9,rad:180/Math.PI,turn:360},a.Dimension=c;var d=function(a){function c(b){return a.call(this,b,"%")||this}return b(c,a),c}(c);a.Percentage=d}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return b(c,a),c.prototype.toString=function(){return this.join("\t")},c.prototype.parse=function(a){var b=this;if(null!==a){var d=new c;return a.split("\t").forEach(function(a,c){d.push(b[c].parse(a))}),d}return new c},c.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},c.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},c.prototype.interpolate=function(a,b){for(var d=new c,e=0;e!==this.length;++e)d.push(this[e].interpolate(a[e],b));return d},c}(Array);a.List=c}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a){this.arr=[],this.arr=(b=this.arr).concat.apply(b,a);var b}return b.prototype.toString=function(){return this.arr.join(" ")},b.prototype.parse=function(a){return new b(null!==a?[a.split(" ").map(parseFloat)]:[])},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b([this.arr.map(function(b,e){return a._lerp(c[e],b,d)})])},b}();a.Matrix=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a){void 0===a&&(a=0),this.n=a}return b.prototype.toString=function(){return this.n.toString()},b.prototype.parse=function(b){return null!==b?new a.Number(parseFloat(b)):new a.Number},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(b,c){return new a.Number(a._lerp(b.n,this.n,c))},b}();a.Number=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b){this.n=a,this.o=b}return b.prototype.toString=function(){return void 0!==this.o?this.n+","+this.o:this.n.toString()},b.prototype.parse=function(a){if(null!==a){var c=a.split(",");return 1===c.length?new b(parseFloat(c[0])):new b(parseFloat(c[0]),parseFloat(c[1]))}return new b(0)},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return void 0!==c.o&&void 0!==this.o?new b(a._lerp(c.n,this.n,d),a._lerp(c.o,this.o,d)):void 0===c.o&&void 0!==this.o?new b(a._lerp(c.n,this.n,d),a._lerp(0,this.o,d)):void 0!==c.o&&void 0===this.o?new b(a._lerp(c.n,this.n,d),a._lerp(c.o,0,d)):new b(a._lerp(c.n,this.n,d))},b}();a.NumberOptionalNumber=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b){this.x=a,this.y=b}return b.prototype.toString=function(){return this.x+","+this.y},b.prototype.parse=function(c){if(null!==c){var d=c.split(",");return new b(a._LengthParse(d[0]),a._LengthParse(d[1]))}return new b(0,0)},b.prototype.get=function(c,d){var e=d.split(":");if(2===e.length){var f=c.getAttribute(e[0]),g=c.getAttribute(e[1]);return null!==f&&null!==g?new b(a._LengthParse(f),a._LengthParse(g)):new b(0,0)}return this.parse(c.getAttribute(d))},b.prototype.set=function(a,b,c){var d=b.split(":");2===d.length?void 0!==c?(a.setAttribute(d[0],c.x.toString()),a.setAttribute(d[1],c.y.toString())):(a.setAttribute(d[0],this.x.toString()),a.setAttribute(d[1],this.y.toString())):void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._LengthInterpolate(c.x,this.x,d),a._LengthInterpolate(c.y,this.y,d))},b}();a.Point=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.x=a,this.y=b,this.meetOrSlice=c}return a.prototype.toString=function(){if(void 0!==this.x&&void 0!==this.y){var a="x"+this.x+"Y"+this.y;return void 0!==this.meetOrSlice&&(a+=" "+this.meetOrSlice),a}return"none"},a}();a.PreserveAspectRatio=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(){function a(a){this.type=a}return a.prototype.toString=function(){return this.type+"("+this.args()+")"},a.prototype.parse=function(a){return null!==a?this.parseArgs(a.substring(a.indexOf("(")+1,a.length-1)):this.parseArgs(a)},a.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},a.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},a}();a.Transform=c,function(c){var d=function(c){function d(a,b,d,e,f,g){void 0===a&&(a=1),void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=1),void 0===f&&(f=0),void 0===g&&(g=0);var h=c.call(this,"matrix")||this;return h.a=a,h.b=b,h.c=d,h.d=e,h.e=f,h.f=g,h}return b(d,c),d.prototype.args=function(){return this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return new d(parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3]),parseFloat(b[4]),parseFloat(b[5]))}return new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c),a._lerp(b.b,this.b,c),a._lerp(b.c,this.c,c),a._lerp(b.d,this.d,c),a._lerp(b.e,this.e,c),a._lerp(b.f,this.f,c))},d}(c);c.Matrix=d;var e=function(c){function d(a,b){void 0===a&&(a=0),void 0===b&&(b=0);var d=c.call(this,"translate")||this;return d.x=a,d.y=b,d}return b(d,c),d.prototype.args=function(){return this.x+" "+this.y},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return 1===b.length?new d(parseFloat(b[0])):new d(parseFloat(b[0]),parseFloat(b[1]))}return new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.x,this.x,c),a._lerp(b.y,this.y,c))},d}(c);c.Translate=e;var f=function(c){function d(a){void 0===a&&(a=1);var b=c.call(this,"scale")||this;return b.s=a,b}return b(d,c),d.prototype.args=function(){return this.s.toString()},d.prototype.parseArgs=function(a){return null!==a?new d(parseFloat(a)):new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.s,this.s,c))},d}(c);c.UniformScale=f;var g=function(c){function d(a,b){void 0===a&&(a=1),void 0===b&&(b=a);var d=c.call(this,"scale")||this;return d.x=a,d.y=b,d}return b(d,c),d.prototype.args=function(){return this.x+" "+this.y},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return 1===b.length?new d(parseFloat(b[0])):new d(parseFloat(b[0]),parseFloat(b[1]))}return new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.x,this.x,c),a._lerp(b.y,this.y,c))},d}(c);c.Scale=g;var h=function(c){function d(a,b,d){void 0===b&&(b=0),void 0===d&&(d=0);var e=c.call(this,"rotate")||this;return e.a=a,e.x=b,e.y=d,e}return b(d,c),d.prototype.args=function(){return this.a+" "+this.x+" "+this.y},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return new d(parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]))}return new d(0)},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c),a._lerp(b.x,this.x,c),a._lerp(b.y,this.y,c))},d}(c);c.Rotate=h;var i=function(c){function d(a){void 0===a&&(a=0);var b=c.call(this,"skewX")||this;return b.a=a,b}return b(d,c),d.prototype.args=function(){return this.a.toString()},d.prototype.parseArgs=function(a){return null!==a?new d(parseFloat(a)):new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c))},d}(c);c.SkewX=i;var j=function(c){function d(a){void 0===a&&(a=0);var b=c.call(this,"skewY")||this;return b.a=a,b}return b(d,c),d.prototype.args=function(){return this.a.toString()},d.prototype.parseArgs=function(a){return null!==a?new d(parseFloat(a)):new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c))},d}(c);c.SkewY=j}(c=a.Transform||(a.Transform={}))}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}return b.prototype.toString=function(){return this.x+" "+this.y+" "+this.width+" "+this.height},b.prototype.parse=function(a){if(null!==a){var c=a.split(" ");return new b(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]))}return new b(0,0,0,0)},b.prototype.get=function(a,c){var d=c.split(":");if(4===d.length){var e=a.getAttribute(d[0]),f=a.getAttribute(d[1]),g=a.getAttribute(d[2]),h=a.getAttribute(d[3]);return null!==e&&null!==f&&null!==g&&null!==h?new b(parseFloat(e),parseFloat(f),parseFloat(g),parseFloat(h)):new b(0,0,0,0)}return this.parse(a.getAttribute(c))},b.prototype.set=function(a,b,c){var d=b.split(":");4===d.length?void 0!==c?(a.setAttribute(d[0],c.x.toString()),a.setAttribute(d[1],c.y.toString()),a.setAttribute(d[2],c.width.toString()),a.setAttribute(d[3],c.height.toString())):(a.setAttribute(d[0],this.x.toString()),a.setAttribute(d[1],this.y.toString()),a.setAttribute(d[2],this.width.toString()),a.setAttribute(d[3],this.height.toString())):void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._LengthInterpolate(c.x,this.x,d),a._LengthInterpolate(c.y,this.y,d),a._LengthInterpolate(c.width,this.width,d),a._LengthInterpolate(c.height,this.height,d))},b}();a.Box=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b=function(){function b(b){if(b)if("string"==typeof b){var c=window.document.getElementById(b);if(!(c instanceof SVGSVGElement))throw new Error("Element with specified ID is not valid");this.root=c}else this.root=b;else this.root=window.document.createElementNS(a.XMLNS,"svg"),window.document.body.appendChild(this.root);this.root.setAttribute("xmlns",a.XMLNS),this.root.setAttributeNS(a.XMLNS,"xlink",a.XLINK),this.root.setAttribute("version","1.1");var d=this.root.getElementsByTagName("defs");d.length>0?this.defs=new a.Element(this,d.item(0)):this.defs=new a.Element(this,"defs")}return b.prototype.addDef=function(a){this.defs.add(a)},b}();a.Paper=b}(a||(a={}));var a;!function(a){var b=function(){return Math.random().toString(36).substring(2)},c=function(){function c(c,d,e){if(this.paper=c,this._id=b(),"string"==typeof d)this._node=window.document.createElementNS(a.XMLNS,d),void 0!==e&&this.setAttributes(e),this.paper.root.appendChild(this._node),this._node.setAttribute("id",this._id);else{this._node=d;var f=this._node.getAttribute("id");null!==f?this._id=f:this._node.setAttribute("id",this._id)}this._style=window.getComputedStyle(this._node)}return Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),c.prototype.toString=function(){return"url(#"+this._id+")"},c.prototype.setAttribute=function(b,c){a.Attribute.isAttribute(c)?c.set(this,b):this._node.setAttribute(b,String(c))},c.prototype.setAttributes=function(a){for(var b in a){var c=a[b];void 0!==c&&null!==c&&this.setAttribute(b,c)}},c.prototype.getAttribute=function(a){return this._node.getAttribute(a)||this._style.getPropertyValue(a)},c.prototype.copyStyleFrom=function(a,b,c){void 0===c&&(c=!0);var d={},e=a._node.attributes;if(b)for(var f=0;f<e.length;++f){var g=e.item(f).name;(b[g]===!0||c)&&(d[g]=a._style.getPropertyValue(g))}else for(var f=0;f<e.length;++f){var g=e.item(f).name;d[g]=a._style.getPropertyValue(g)}this.setAttributes(d)},Object.defineProperty(c.prototype,"boundingBox",{get:function(){var b=this._node.getBoundingClientRect();return new a.Attribute.Box(b.left,b.top,b.width,b.height)},enumerable:!0,configurable:!0}),c.prototype.add=function(a){this._node.appendChild(a._node)},c.prototype.getChildren=function(){for(var a=this._node.childNodes,b=[],d=0;d<a.length;++d)b.push(new c(this.paper,a.item(d)));return b},c.prototype.clone=function(a){void 0===a&&(a=!0);var d=new c(this.paper,this._node.cloneNode(a));return d._id=b(),d._node.setAttribute("id",d._id),d},c.prototype.addEventListener=function(a,b){this._node.addEventListener(a,b.bind(this))},c.prototype.cloneNode=function(a){void 0===a&&(a=!0);var c=this._node.cloneNode(a);return c.setAttribute("id",b()),c},c}();a.Element=c}(a||(a={}));var a;!function(a){var c;!function(c){var d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return b(c,a),c}(a.Element);c.AbstractRenderable=d}(c=a.Elements||(a.Elements={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return b(c,a),c}(a.AbstractRenderable);c.AbstractShape=d}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"circle",c)||this}return b(c,a),c}(a.AbstractShape);c.Circle=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.circle=function(b,c,d){return new a.Elements.Renderable.Shape.Circle(this,{cx:b,cy:c,r:d})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"ellipse",c)||this}return b(c,a),c}(a.AbstractShape);c.Ellipse=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.ellipse=function(b,c,d,e){return new a.Elements.Renderable.Shape.Ellipse(this,{cx:b,cy:c,rx:d,ry:e})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"line",c)||this}return b(c,a),c}(a.AbstractShape);c.Line=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.line=function(b,c,d,e){return new a.Elements.Renderable.Shape.Line(this,{x1:b,x2:d,y1:c,y2:e})}}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(){function a(){}return a.prototype.parse=function(a){return null!==a?this.parseArgs(a.substr(2)):this.defaultInstance()},a.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},a.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},a}();a.PathSegment=c,function(c){var d=function(c){function d(b){void 0===b&&(b=new a.Point(0,0));var d=c.call(this)||this;return d.p=b,d}return b(d,c),d.prototype.toString=function(){return this.type+" "+this.p.toString()},d.prototype.parseArgs=function(a){return this.buildInstance(this.p.parse(a))},d.prototype.interpolate=function(a,b){return this.buildInstance(this.p.interpolate(a.p,b))},d}(c);c.SinglePoint=d;var e=function(c){function d(b,d){void 0===b&&(b=new a.Point(0,0)),void 0===d&&(d=new a.Point(0,0));var e=c.call(this)||this;return e.p1=b,e.p2=d,e}return b(d,c),d.prototype.toString=function(){return this.type+" "+this.p1.toString()+" "+this.p2.toString()},d.prototype.parseArgs=function(a){var b=a.split(" ");return this.buildInstance(this.p1.parse(b[0]),this.p2.parse(b[1]))},d.prototype.interpolate=function(a,b){return this.buildInstance(this.p1.interpolate(a.p1,b),this.p2.interpolate(a.p2,b))},d}(c);c.DoublePoint=e;var f=function(c){function d(b,d,e){void 0===b&&(b=new a.Point(0,0)),void 0===d&&(d=new a.Point(0,0)),void 0===e&&(e=new a.Point(0,0));var f=c.call(this)||this;return f.p1=b,f.p2=d,f.p3=e,f}return b(d,c),d.prototype.toString=function(){return this.type+" "+this.p1.toString()+" "+this.p2.toString()+" "+this.p3.toString()},d.prototype.parseArgs=function(a){var b=a.split(" ");return this.buildInstance(this.p1.parse(b[0]),this.p2.parse(b[1]),this.p3.parse(b[2]))},d.prototype.interpolate=function(a,b){return this.buildInstance(this.p1.interpolate(a.p1,b),this.p2.interpolate(a.p2,b),this.p3.interpolate(a.p3,b))},d}(c);c.TriplePoint=f;var g=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="M",b}return b(c,a),c.prototype.buildInstance=function(a){return new c(a)},c.prototype.defaultInstance=function(){return new c},c}(d);c.MoveToAbs=g;var h=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="m",b}return b(c,a),c.prototype.buildInstance=function(a){return new c(a)},c.prototype.defaultInstance=function(){return new c},c}(d);c.MoveToRel=h;var i=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="L",b}return b(c,a),c.prototype.buildInstance=function(a){return new c(a)},c.prototype.defaultInstance=function(){return new c},c}(d);c.LineToAbs=i;var j=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="l",b}return b(c,a),c.prototype.buildInstance=function(a){return new c(a)},c.prototype.defaultInstance=function(){return new c},c}(d);c.LineToRel=j;var k=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="Q",b}return b(c,a),c.prototype.buildInstance=function(a,b){return new c(a,b)},c.prototype.defaultInstance=function(){return new c},c}(e);c.CurveToQuadraticAbs=k;var l=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="q",b}return b(c,a),c.prototype.buildInstance=function(a,b){return new c(a,b)},c.prototype.defaultInstance=function(){return new c},c}(e);c.CurveToQuadraticRel=l;var m=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="T",b}return b(c,a),c.prototype.buildInstance=function(a){return new c(a)},c.prototype.defaultInstance=function(){return new c},c}(d);c.CurveToQuadraticSmoothAbs=m;var n=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="t",b}return b(c,a),c.prototype.buildInstance=function(a){return new c(a)},c.prototype.defaultInstance=function(){return new c},c}(d);c.CurveToQuadraticSmoothRel=n;var o=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="C",b}return b(c,a),c.prototype.buildInstance=function(a,b,d){return new c(a,b,d)},c.prototype.defaultInstance=function(){return new c},c}(f);c.CurveToCubicAbs=o;var p=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="c",b}return b(c,a),c.prototype.buildInstance=function(a,b,d){return new c(a,b,d)},c.prototype.defaultInstance=function(){return new c},c}(f);c.CurveToCubicRel=p;var q=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="S",b}return b(c,a),c.prototype.buildInstance=function(a,b){return new c(a,b)},c.prototype.defaultInstance=function(){return new c},c}(e);c.CurveToCubicSmoothAbs=q;var r=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="s",b}return b(c,a),c.prototype.buildInstance=function(a,b){return new c(a,b)},c.prototype.defaultInstance=function(){return new c},c}(e);c.CurveToCubicSmoothRel=r;var s=function(c){function d(b,d,e,f,g){void 0===b&&(b=new a.Point(0,0)),void 0===d&&(d=new a.Point(0,0)),void 0===e&&(e=0),void 0===f&&(f=!1),void 0===g&&(g=!0);var h=c.call(this)||this;return h.r=b,h.p=d,h.xAxisRotate=e,h.largeArc=f,h.sweepClockwise=g,h}return b(d,c),d.prototype.toString=function(){return this.r.toString()+" "+this.xAxisRotate+" "+(this.largeArc?1:0)+" "+(this.sweepClockwise?1:0)+" "+this.p.toString()},d.prototype.parseArgs=function(a){var b=a.split(" ");return this.buildInstance(this.r.parse(b[0]),this.p.parse(b[4]),parseFloat(b[1]),"1"===b[2],"1"===b[3])},d.prototype.interpolate=function(b,c){return this.buildInstance(this.r.interpolate(b.r,c),this.p.interpolate(b.p,c),a._lerp(b.xAxisRotate,this.xAxisRotate,c),c<.5?b.largeArc:this.largeArc,c<.5?b.sweepClockwise:this.sweepClockwise)},d}(c);c.ArcTo=s;var t=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="A",b}return b(c,a),c.prototype.buildInstance=function(a,b,d,e,f){return new c(a,b,d,e,f)},c.prototype.defaultInstance=function(){return new c},c}(s);c.ArcToAbs=t;var u=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="a",b}return b(c,a),c.prototype.buildInstance=function(a,b,d,e,f){return new c(a,b,d,e,f)},c.prototype.defaultInstance=function(){return new c},c}(s);c.ArcToRel=u;var v=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.type="Z",b}return b(c,a),c.prototype.toString=function(){return"Z"},c.prototype.parseArgs=function(a){return new c},c.prototype.defaultInstance=function(){return new c},c.prototype.interpolate=function(a,b){return new c},c}(c);c.ClosePath=v}(c=a.PathSegment||(a.PathSegment={}))}(c=a.Attribute||(a.Attribute={}))}(a||(a={})),function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"path",c)||this}return b(c,a),c}(a.AbstractShape);c.Path=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.path=function(b,c){return new a.Elements.Renderable.Shape.Path(this,{d:b,pathLength:c})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"polygon",c)||this}return b(c,a),c}(a.AbstractShape);c.Polygon=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.polygon=function(b){return new a.Elements.Renderable.Shape.Polygon(this,{points:b})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"polyline",c)||this}return b(c,a),c}(a.AbstractShape);c.Polyline=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.polyline=function(b){return new a.Elements.Renderable.Shape.Polyline(this,{points:b})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"rect",c)||this}return b(c,a),c}(a.AbstractShape);c.Rect=d}(c=a.Shape||(a.Shape={}))}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.rect=function(b,c,d,e,f,g){return new a.Elements.Renderable.Shape.Rect(this,{x:b,y:c,width:d,height:e,rx:f,ry:g})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"g",c)||this}return b(c,a),c}(a.AbstractRenderable);c.Group=d}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.group=function(b){var c=new a.Elements.Renderable.Group(this);return b.forEach(function(a){return c.add(a)}),c}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"image",c)||this}return b(c,a),c}(a.AbstractRenderable);c.Image=d}(c=a.Renderable||(a.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.image=function(b){return new a.Elements.Renderable.Image(this,b)}}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function a(a){"string"==typeof a?this._str=a:this._cb=a}return a.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
},a.prototype.parse=function(b){return new a(b||"")},a.prototype.get=function(a,b){return this.parse(a._node.textContent)},a.prototype.set=function(b,c,d){var e=this._str;e||(e=this._cb()),b._node.textContent=a.escapeHtml(e)},a.prototype.interpolate=function(a,b){return b<.5?a:this},a}();a.TextContent=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={})),function(a){var c;!function(c){var d;!function(d){var e=function(a){function c(b,c){return a.call(this,b,"tspan",c)||this}return b(c,a),Object.defineProperty(c.prototype,"computedLength",{get:function(){return this._node.getComputedTextLength()},enumerable:!0,configurable:!0}),c}(c.AbstractRenderable);d.TextSpan=e;var f=function(c){function d(a,b){return c.call(this,a,"text",b)||this}return b(d,c),d.prototype.addSpan=function(b,c,d){void 0===d&&(d=!0);var f=new e(this.paper);return f.setAttribute("textContent",b),c&&(f.setAttribute("x",parseFloat(this.getAttribute("x")||"0")),"number"==typeof c?f.setAttribute("dy",new a.Attribute.Dimension(c,"em")):f.setAttribute("dy",c)),this.add(f),f},Object.defineProperty(d.prototype,"computedLength",{get:function(){return this._node.getComputedTextLength()},enumerable:!0,configurable:!0}),d}(c.AbstractRenderable);d.Text=f;var g=function(c){function d(b,d,e,f){var g=c.call(this,b,f)||this,h=new a.Elements.Renderable.Text(b);h.setAttribute("opacity",0);var i=new a.Elements.Renderable.TextSpan(b);h.add(i),f&&i.setAttributes(f);var j=(h.computedLength,[""]);return d.split(" ").forEach(function(b,c){var d=j[j.length-1],f=0===d.length?b:d+" "+b,g=new a.Attribute.TextContent(f);i.setAttribute("textContent",g),i.computedLength>e&&d.length>0?j.push(b):j[j.length-1]=f}),j.forEach(function(b){b.length>0&&g.addSpan(new a.Attribute.TextContent(b),1)}),g}return b(d,c),d}(f);d.MultilineText=g}(d=c.Renderable||(c.Renderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.text=function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=0);var e=new a.Elements.Renderable.Text(this,{x:c,y:d});return b.forEach(function(a){return e.addSpan(a)}),e}}(a||(a={}));var a;!function(a){var b;!function(a){}(b=a.Attribute||(a.Attribute={}))}(a||(a={})),function(a){var c;!function(c){var d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return b(c,a),c}(a.Element);c.AbstractNonRenderable=d}(c=a.Elements||(a.Elements={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return b(c,a),c}(a.AbstractNonRenderable);c.AbstractPaintServer=d}(c=a.NonRenderable||(a.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={}));var a;!function(a){var c;!function(c){var d;!function(c){var d;!function(d){var e=function(c){function d(b,d,e,f){var g=c.call(this,b,d,f)||this;g.paper.addDef(g);var h=[];return Object.keys(e).forEach(function(c){h.push(new a.Elements.NonRenderable.PaintServer.Gradient.Stop(b,Number(c),e[c]))}),h.sort(function(a,b){return a.offset-b.offset}),h.forEach(function(a){return g.add(a)}),g}return b(d,c),d}(c.AbstractPaintServer);d.AbstractGradient=e;var f;!function(c){var d=function(c){function d(b,d,e){var f=c.call(this,b,"stop",{offset:new a.Attribute.Dimension(100*d,"%"),"stop-color":e})||this;return f.offset=d,f}return b(d,c),d}(a.Element);c.Stop=d}(f=d.Gradient||(d.Gradient={}))}(d=c.PaintServer||(c.PaintServer={}))}(d=c.NonRenderable||(c.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c,d){return a.call(this,b,"linearGradient",c,d)||this}return b(c,a),c}(a.AbstractGradient);c.Linear=d}(c=a.Gradient||(a.Gradient={}))}(c=a.PaintServer||(a.PaintServer={}))}(c=a.NonRenderable||(a.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.linearGradient=function(b,c){return new a.Elements.NonRenderable.PaintServer.Gradient.Linear(this,b,c)}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c,d){return a.call(this,b,"radialGradient",c,d)||this}return b(c,a),c}(a.AbstractGradient);c.Radial=d}(c=a.Gradient||(a.Gradient={}))}(c=a.PaintServer||(a.PaintServer={}))}(c=a.NonRenderable||(a.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.radialGradient=function(b,c){return new a.Elements.NonRenderable.PaintServer.Gradient.Radial(this,b,c)}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c,d,e,f,g){void 0===d&&(d=c instanceof SVGPatternElement?0:c),void 0===e&&(e=0),void 0===f&&(f=0);var h=a.call(this,b,c instanceof SVGPatternElement?c:"pattern")||this;return h.paper=b,h.paper.addDef(h),c instanceof SVGPatternElement||(h.setAttribute("width",c),h.setAttribute("height",d),h.setAttribute("x",e),h.setAttribute("y",f),g?h.setAttribute("viewBox",g):h.setAttribute("patternUnits","userSpaceOnUse")),h}return b(c,a),c.prototype.clone=function(b){return void 0===b&&(b=!0),new c(this.paper,a.prototype.cloneNode.call(this,b))},c}(a.AbstractPaintServer);c.Pattern=d}(c=a.PaintServer||(a.PaintServer={}))}(c=a.NonRenderable||(a.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.pattern=function(b,c,d,e,f){return new a.Elements.NonRenderable.PaintServer.Pattern(this,b,c,d,e,f)},a.Elements.Renderable.Group.prototype.toPattern=function(b,c,d,e,f){var g=new a.Elements.NonRenderable.PaintServer.Pattern(this.paper,b,c,d,e,f);return this.getChildren().forEach(function(a){return g.add(a)}),g}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"marker",c)||this}return b(c,a),c}(a.AbstractNonRenderable);c.Marker=d}(c=a.NonRenderable||(a.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.marker=function(){return new a.Elements.NonRenderable.Marker(this,{})}}(a||(a={}));var a;!function(a){var c;!function(a){var c;!function(c){var d=function(a){function c(b,c,d,e,f,g,h){var i=a.call(this,b,"mask")||this;return i.paper=b,i.paper.addDef(i),i.setAttribute("width",c),i.setAttribute("height",d),void 0!==e&&i.setAttribute("x",e),void 0!==f&&i.setAttribute("y",f),void 0!==g&&i.setAttribute("maskUnits",g),void 0!==h&&i.setAttribute("maskContentUnits",h),i}return b(c,a),c}(a.AbstractNonRenderable);c.Mask=d}(c=a.NonRenderable||(a.NonRenderable={}))}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.mask=function(b,c,d,e,f,g){return new a.Elements.NonRenderable.Mask(this,b,c,d,e,f,g)}}(a||(a={}));var a;return function(a){var b;!function(a){var b;!function(a){var b;!function(a){}(b=a.LightSource||(a.LightSource={}))}(b=a.FilterPrimitive||(a.FilterPrimitive={}))}(b=a.Attribute||(a.Attribute={}))}(a||(a={})),function(a){var c;!function(c){var d=function(a){function c(b,c,d){return a.call(this,b.paper,c,d)||this}return b(c,a),c}(a.Element);c.FilterPrimitive=d,function(a){var c=function(a){function c(b,c){return a.call(this,b,"feBlend",c)||this}return b(c,a),c}(a);a.Blend=c;var d=function(a){function c(b,c){return a.call(this,b,"feColorMatrix",c)||this}return b(c,a),c}(a);a.ColorMatrix=d;var e=function(a){function c(b,c){return a.call(this,b,"feComponentTransfer",c)||this}return b(c,a),c}(a);a.ComponentTransfer=e;var f=function(a){function c(b,c){return a.call(this,b,"feComposite",c)||this}return b(c,a),c}(a);a.Composite=f;var g=function(a){function c(b,c){return a.call(this,b,"feConvolveMatrix",c)||this}return b(c,a),c}(a);a.ConvolveMatrix=g;var h=function(a){function c(b,c){return a.call(this,b,"feDiffuseLighting",c)||this}return b(c,a),c}(a);a.DiffuseLighting=h;var i=function(a){function c(b,c){return a.call(this,b,"feDisplacementMap",c)||this}return b(c,a),c}(a);a.DisplacementMap=i;var j=function(a){function c(b,c){return a.call(this,b,"feFlood",c)||this}return b(c,a),c}(a);a.Flood=j;var k=function(a){function c(b,c){return a.call(this,b,"feGaussianBlur",c)||this}return b(c,a),c}(a);a.GaussianBlur=k;var l=function(a){function c(b,c){return a.call(this,b,"feImage",c)||this}return b(c,a),c}(a);a.Image=l;var m=function(a){function c(b){return a.call(this,b,"feMerge")||this}return b(c,a),c}(a);a.Merge=m;var n=function(a){function c(b,c){return a.call(this,b,"feMergeNode",c)||this}return b(c,a),c}(a);a.MergeNode=n;var o=function(a){function c(b,c){return a.call(this,b,"feMorphology",c)||this}return b(c,a),c}(a);a.Morphology=o;var p=function(a){function c(b,c){return a.call(this,b,"feOffset",c)||this}return b(c,a),c}(a);a.Offset=p;var q=function(a){function c(b,c){return a.call(this,b,"feSpecularLighting",c)||this}return b(c,a),c}(a);a.SpecularLighting=q;var r=function(a){function c(b,c){return a.call(this,b,"feTile",c)||this}return b(c,a),c}(a);a.Tile=r;var s=function(a){function c(b,c){return a.call(this,b,"feTurbulence",c)||this}return b(c,a),c}(a);a.Turbulence=s;var t=function(a){function c(b,c,d){return a.call(this,b,"feFunc"+c,d)||this}return b(c,a),c}(a);a.TransferFunction=t;var u;!function(c){var d=function(a){function c(b,c){return a.call(this,b,"feDistantLight",c)||this}return b(c,a),c}(a);c.DistantLight=d;var e=function(a){function c(b,c){return a.call(this,b,"fePointLight",c)||this}return b(c,a),c}(a);c.PointLight=e;var f=function(a){function c(b,c){return a.call(this,b,"feSpotLight",c)||this}return b(c,a),c}(a);c.SpotLight=f}(u=a.LightSource||(a.LightSource={}))}(d=c.FilterPrimitive||(c.FilterPrimitive={}));var e=function(a,b){var c=Object.create(null);for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c},f=function(d){function f(a){var b=d.call(this,a,"filter")||this;return b.paper=a,b.paper.defs.add(b),b}return b(f,d),f.prototype.blend=function(a,b,d){var e=new c.FilterPrimitive.Blend(this,{in:b,in2:d,mode:a});return this.addEffect(e),e},f.prototype.colorMatrix=function(a,b){var d=new c.FilterPrimitive.ColorMatrix(this,{in:b,type:a.type,values:a});return this.addEffect(d),d},f.prototype.componentTransfer=function(a,b,d,e,f){var g=new c.FilterPrimitive.ComponentTransfer(this,{in:f});return g.add(new c.FilterPrimitive.TransferFunction(this,"R",a)),g.add(new c.FilterPrimitive.TransferFunction(this,"G",b)),g.add(new c.FilterPrimitive.TransferFunction(this,"B",d)),void 0!==e&&g.add(new c.FilterPrimitive.TransferFunction(this,"A",e)),this.addEffect(g),g},f.prototype.composite=function(a,b,d,e,f,g,h){var i=new c.FilterPrimitive.Composite(this,{in:g,in2:h,operator:a,k1:b,k2:d,k3:e,k4:f});return this.addEffect(i),i},f.prototype.convolveMatrix=function(a,b){var d=new c.FilterPrimitive.ConvolveMatrix(this,e(a,{in:b}));return this.addEffect(d),d},f.prototype.diffuseLighting=function(a,b,d){void 0===b&&(b=[]);var f=new c.FilterPrimitive.DiffuseLighting(this,e(a,{in:d}));return this.addLights(f,b),this.addEffect(f),f},f.prototype.displacementMap=function(a,b,d){var f=new c.FilterPrimitive.DisplacementMap(this,e(a,{in:b,in2:d}));return this.addEffect(f),f},f.prototype.flood=function(a,b){var d=new c.FilterPrimitive.Flood(this,{"flood-color":a});return d.setAttributes({x:b.x,y:b.y,width:b.width,height:b.height}),this.addEffect(d),d},f.prototype.gaussianBlur=function(a,b,d){void 0===a&&(a=0),void 0===b&&(b="duplicate");var e=new c.FilterPrimitive.GaussianBlur(this,{in:d,stdDeviation:a,edgeMode:b});return this.addEffect(e),e},f.prototype.image=function(a,b){var d=new c.FilterPrimitive.Image(this,{"xlink:href":a,preserveAspectRatio:b});return this.addEffect(d),d},f.prototype.merge=function(b){var d=this,e=new c.FilterPrimitive.Merge(this);return b.forEach(function(b){var c=new a.Element(d.paper,"feMergeNode",{in:b});e.add(c)}),this.addEffect(e),e},f.prototype.morphology=function(a,b,d){var e=new c.FilterPrimitive.Morphology(this,{in:d,operator:a,radius:b});return this.addEffect(e),e},f.prototype.offset=function(a,b){var d=new c.FilterPrimitive.Offset(this,{in:b,dx:a.x,dy:a.y});return this.addEffect(d),d},f.prototype.specularLighting=function(a,b,d){void 0===b&&(b=[]);var e=new c.FilterPrimitive.SpecularLighting(this,a);return this.addLights(e,b),this.addEffect(e),e},f.prototype.tile=function(a,b){var d=new c.FilterPrimitive.Tile(this,{in:b});return d.setAttributes({x:a.x,y:a.y,width:a.width,height:a.height}),this.addEffect(d),d},f.prototype.turbulence=function(a){var b=new c.FilterPrimitive.Turbulence(this,a);return this.addEffect(b),b},f.prototype.addEffect=function(a){a.setAttribute("result",a.id),this.add(a)},f.prototype.addLights=function(a,b){var d=this;b.forEach(function(b){switch(b.type){case"point":a.add(new c.FilterPrimitive.LightSource.PointLight(d,b));break;case"distant":a.add(new c.FilterPrimitive.LightSource.DistantLight(d,b));break;case"spot":a.add(new c.FilterPrimitive.LightSource.SpotLight(d,b))}})},f}(a.Element);c.Filter=f}(c=a.Elements||(a.Elements={}))}(a||(a={})),function(a){a.Paper.prototype.filter=function(){return new a.Elements.Filter(this)}}(a||(a={})),a});