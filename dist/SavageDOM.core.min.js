!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.SavageDOM=b()}):"object"==typeof module&&module.exports?module.exports=b():a.SavageDOM=b()}(this,function(){var a,b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};!function(a){a.XMLNS="http://www.w3.org/2000/svg",a.XLINK="http://www.w3.org/1999/xlink"}(a||(a={}));var a;!function(a){}(a||(a={})),function(a){var b;!function(a){a.isAttribute=function(a){return"function"==typeof a.interpolate&&"function"==typeof a.parse},a._LengthParse=function(b){var c=b.match(/(\d+|\d+\.\d+)(\w+|%)/i);return null!==c?new a.Dimension(parseFloat(c[1]),c[2]):parseFloat(b)},a._LengthInterpolate=function(b,c,d){return"number"!=typeof b?"number"!=typeof c?c.interpolate(b,d):b.interpolate(new a.Dimension(c,b.unit),1-d):"number"!=typeof c?c.interpolate(new a.Dimension(b,c.unit),d):a._lerp(b,c,d)}}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){a._lerp=function(a,b,c){return a+(b-a)*c};var c=function(){function a(){}return a}(),d=function(c){function d(a,b,d,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=1);var f=c.call(this)||this;if(f.r=0,f.g=0,f.b=0,f.a=1,"string"==typeof a){var g=a.match(/^rgba\s*?\(\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(0|0\.\d*|1|1.0*)\s*?\)$/i);null!==g&&(f.r=parseInt(g[1],10),f.g=parseInt(g[2],10),f.b=parseInt(g[3],10),f.a=parseFloat(g[4]));var h=a.match(/^rgb\s*?\(\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?,\s*?(000|0?\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\s*?\)$/i);null!==h&&(f.r=parseInt(h[1],10),f.g=parseInt(h[2],10),f.b=parseInt(h[3],10))}else f.r=a,f.g=b,f.b=d,f.a=e;return f}return b(d,c),d.prototype.toString=function(){return"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.a+")"},d.prototype.toHSL=function(){var a,b,c=this.r/255,d=this.g/255,f=this.b/255,g=Math.max(c,d,f),h=Math.min(c,d,f),i=(g+h)/2,j=g-h,k=i;if(0===j)a=0,b=0;else{switch(b=i>.5?j/(2-j):j/(g+h),g){case c:a=(d-f)/j+(d<f?6:0);break;case d:a=(f-c)/j+2;break;case f:a=(c-d)/j+4;break;default:a=0}a*=60}return new e(a,b,k)},d.prototype.interpolate=function(b,c,f){var g=f.substr(0,3);if("rgb"===g){if(b instanceof e&&(b=b.toRGB()),b instanceof d)return new d(a._lerp(b.r,this.r,c),a._lerp(b.g,this.g,c),a._lerp(b.b,this.b,c),a._lerp(b.a,this.a,c))}else if("hsl"===g)return b instanceof e?b.interpolate(this,1-c,f):this.toHSL().interpolate(b,c,f);return this},d}(c),e=function(c){function e(a,b,d,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=1);var f=c.call(this)||this;if(f.h=0,f.s=0,f.l=0,f.a=1,"string"==typeof a){var g=a.match(/^hsla\s*?\(\s*?(000|0?\d{1,2}|[1-2]\d\d|3[0-5]\d|360)\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?,\s*?(0|0\.\d*|1|1.0*)\s*?\)$/i);null!==g&&(f.h=parseFloat(g[1]),f.s=parseFloat(g[2])/100,f.l=parseFloat(g[3])/100,f.a=parseFloat(g[4]));var h=a.match(/^hsl\s*?\(\s*?(000|0?\d{1,2}|[1-2]\d\d|3[0-5]\d|360)\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?,\s*?(0\.?0*|100\.?0*|\d{1,2}|\d{1,2}\.\d+)\%\s*?\)$/i);null!==h&&(f.h=parseFloat(h[1]),f.s=parseFloat(h[2])/100,f.l=parseFloat(h[3])/100)}else f.h=a,f.s=b,f.l=d,f.a=e;return f}return b(e,c),e.prototype.toString=function(){return"hsla("+this.h%360+", "+100*this.s+"%, "+100*this.l+"%, "+this.a+")"},e.prototype.toRGB=function(){var a=0,b=0,c=0;if(0!==this.s){var e=(1-Math.abs(2*this.l-1))*this.s,f=e*(1-Math.abs(this.h/60%2-1));this.h<60?(a=e,b=f):this.h<120?(a=f,b=e):this.h<180?(b=e,c=f):this.h<240?(b=f,c=e):this.h<180?(c=e,a=f):this.h<240&&(c=f,a=e);var g=this.l-.5*e;a+=g,b+=g,c+=g}return new d(255*a,255*b,255*c)},e.prototype.interpolate=function(b,c,f){var g=f.substr(0,3);if("hsl"===g){if(b instanceof d&&(b=b.toHSL()),b instanceof e){var h=b.h,i=this.h,j=h-i;return Math.abs(j)>180?"hsl-shortest"===f&&(j<0?h+=360:i+=360):"hsl-longest"===f&&(j<0?h+=360:i+=360),j>0&&"hsl-clockwise"===f&&(i+=360),j<0&&"hsl-counterclockwise"===f&&(h+=360),new e(a._lerp(h,i,c)%360,a._lerp(b.s,this.s,c),a._lerp(b.l,this.l,c),a._lerp(b.a,this.a,c))}}else if("rgb"===g)return b instanceof d?b.interpolate(this,1-c,f):this.toRGB().interpolate(b,c,f);return this},e}(c),f=function(){function a(b,c,f,g,h){if(void 0===c&&(c=0),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=1),this.mode=a.DEFAULT_MODE,"rgb"===b)this.impl=new d(c,f,g,h);else if("hsl"===b)this.impl=new e(c,f,g,h);else if(void 0!==b)if(0===b.indexOf("rgb"))this.impl=new d(b);else if(0===b.indexOf("hsl"))this.impl=new e(b);else if(0===b.indexOf("#")){var i=0,j=0,k=0,l=b.match(/^#([0-9a-fA-F]{3})$/i);null!==l?(i=17*parseInt(l[1].charAt(0),16),j=17*parseInt(l[1].charAt(1),16),k=17*parseInt(l[1].charAt(2),16)):(l=b.match(/^#([0-9a-fA-F]{6})$/i),null!==l&&(i=parseInt(l[1].substr(0,2),16),j=parseInt(l[1].substr(2,2),16),k=parseInt(l[1].substr(4,2),16))),this.impl=new d(i,j,k)}}return a.prototype.toString=function(){return this.impl.toString()},a.prototype.parse=function(b){return null!==b?new a(b):new a},a.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},a.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},a.prototype.interpolate=function(b,c){var d=new a;return d.impl=this.impl.interpolate(b.impl,c,this.mode),d.mode=this.mode,d},a}();f.DEFAULT_MODE="rgb",a.Color=f}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(a){void 0===a&&(a=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,0]]),this.type="matrix",this.arr=[],this.arr=(b=this.arr).concat.apply(b,a);var b}return b.prototype.parse=function(a){return new b(null!==a?[a.split(" ").map(parseFloat)]:[])},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b([this.arr.map(function(b,e){return a._lerp(c[e],b,d)})])},b}();b.Raw=c;var d=function(){function b(a){void 0===a&&(a=1),this.value=a,this.type="saturate"}return b.prototype.toString=function(){return this.value.toString()},b.prototype.parse=function(a){return null!==a?new b(parseFloat(a)):new b},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._lerp(c.value,this.value,d))},b}();b.Saturate=d;var e=function(){function b(a){void 0===a&&(a=0),this.value=a,this.type="hueRotate"}return b.prototype.toString=function(){return this.value.toString()},b.prototype.parse=function(a){return null!==a?new b(parseFloat(a)):new b},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._lerp(c.value,this.value,d))},b}();b.HueRotate=e;var f=function(){function a(){this.type="luminanceToAlpha"}return a.prototype.toString=function(){return""},a}();b.LuminanceToAlphaColorMatrix=f}(b=a.ColorMatrix||(a.ColorMatrix={}))}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b){this.value=a,this.unit=b}return b.prototype.toString=function(){return""+this.value+this.unit},b.prototype.parse=function(a){if(null!==a){var c=a.match(/(\d+|\d+\.\d+)(\w+|%)/i);if(null!==c){var d=b.convert[c[2]],e=1/b.convert[this.unit];return void 0!==d&&void 0!==e?new b(parseFloat(c[1])*d*e,this.unit):new b(parseFloat(c[1]),c[2])}return new b(parseFloat(a),this.unit)}return new b(0,this.unit)},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){if(this.unit!==c.unit){var e=b.convert[this.unit],f=1/b.convert[c.unit];if(void 0!==e&&void 0!==f)return new b(a._lerp(c.value,this.value,d)*e*f,this.unit)}return new b(a._lerp(c.value,this.value,d),this.unit)},b}();b.convert={px:1,in:96,cm:254/96,mm:25.4/96,pt:.75,pc:9,deg:1,grad:.9,rad:180/Math.PI,turn:360},a.Dimension=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return b(c,a),c.prototype.toString=function(){return this.join("\t")},c.prototype.parse=function(a){var b=this;if(null!==a){var d=new c;return a.split("\t").forEach(function(a,c){d.push(b[c].parse(a))}),d}return new c},c.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},c.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},c.prototype.interpolate=function(a,b){for(var d=new c,e=0;e!==this.length;++e)d.push(this[e].interpolate(a[e],b));return d},c}(Array);a.List=c}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a){this.arr=[],this.arr=(b=this.arr).concat.apply(b,a);var b}return b.prototype.toString=function(){return this.arr.join(" ")},b.prototype.parse=function(a){return new b(null!==a?[a.split(" ").map(parseFloat)]:[])},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b([this.arr.map(function(b,e){return a._lerp(c[e],b,d)})])},b}();a.Matrix=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a){void 0===a&&(a=0),this.n=a}return b.prototype.toString=function(){return this.n.toString()},b.prototype.parse=function(b){return null!==b?new a.Number(parseFloat(b)):new a.Number},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(b,c){return new a.Number(a._lerp(b.n,this.n,c))},b}();a.Number=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b){this.n=a,this.o=b}return b.prototype.toString=function(){return void 0!==this.o?this.n+","+this.o:this.n.toString()},b.prototype.parse=function(a){if(null!==a){var c=a.split(",");return 1===c.length?new b(parseFloat(c[0])):new b(parseFloat(c[0]),parseFloat(c[1]))}return new b(0)},b.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},b.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return void 0!==c.o&&void 0!==this.o?new b(a._lerp(c.n,this.n,d),a._lerp(c.o,this.o,d)):void 0===c.o&&void 0!==this.o?new b(a._lerp(c.n,this.n,d),a._lerp(0,this.o,d)):void 0!==c.o&&void 0===this.o?new b(a._lerp(c.n,this.n,d),a._lerp(c.o,0,d)):new b(a._lerp(c.n,this.n,d))},b}();a.NumberOptionalNumber=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b){this.x=a,this.y=b}return b.prototype.toString=function(){return this.x+","+this.y},b.prototype.parse=function(c){if(null!==c){var d=c.split(",");return new b(a._LengthParse(d[0]),a._LengthParse(d[1]))}return new b(0,0)},b.prototype.get=function(c,d){var e=d.split(":");if(2===e.length){var f=c.getAttribute(e[0]),g=c.getAttribute(e[1]);return null!==f&&null!==g?new b(a._LengthParse(f),a._LengthParse(g)):new b(0,0)}return this.parse(c.getAttribute(d))},b.prototype.set=function(a,b,c){var d=b.split(":");2===d.length?void 0!==c?(a.setAttribute(d[0],c.x.toString()),a.setAttribute(d[1],c.y.toString())):(a.setAttribute(d[0],this.x.toString()),a.setAttribute(d[1],this.y.toString())):void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._LengthInterpolate(c.x,this.x,d),a._LengthInterpolate(c.y,this.y,d))},b}();a.Point=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.x=a,this.y=b,this.meetOrSlice=c}return a.prototype.toString=function(){if(void 0!==this.x&&void 0!==this.y){var a="x"+this.x+"Y"+this.y;return void 0!==this.meetOrSlice&&(a+=" "+this.meetOrSlice),a}return"none"},a}();a.PreserveAspectRatio=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(){function a(a){this.type=a}return a.prototype.toString=function(){return this.type+"("+this.args()+")"},a.prototype.parse=function(a){return null!==a?this.parseArgs(a.substring(a.indexOf("(")+1,a.length-1)):this.parseArgs(a)},a.prototype.get=function(a,b){return this.parse(a.getAttribute(b))},a.prototype.set=function(a,b,c){void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},a}();a.Transform=c,function(c){var d=function(c){function d(a,b,d,e,f,g){void 0===a&&(a=1),void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=1),void 0===f&&(f=0),void 0===g&&(g=0);var h=c.call(this,"matrix")||this;return h.a=a,h.b=b,h.c=d,h.d=e,h.e=f,h.f=g,h}return b(d,c),d.prototype.args=function(){return this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return new d(parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3]),parseFloat(b[4]),parseFloat(b[5]))}return new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c),a._lerp(b.b,this.b,c),a._lerp(b.c,this.c,c),a._lerp(b.d,this.d,c),a._lerp(b.e,this.e,c),a._lerp(b.f,this.f,c))},d}(c);c.Matrix=d;var e=function(c){function d(a,b){void 0===a&&(a=0),void 0===b&&(b=0);var d=c.call(this,"translate")||this;return d.x=a,d.y=b,d}return b(d,c),d.prototype.args=function(){return this.x+" "+this.y},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return 1===b.length?new d(parseFloat(b[0])):new d(parseFloat(b[0]),parseFloat(b[1]))}return new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.x,this.x,c),a._lerp(b.y,this.y,c))},d}(c);c.Translate=e;var f=function(c){function d(a){void 0===a&&(a=1);var b=c.call(this,"scale")||this;return b.s=a,b}return b(d,c),d.prototype.args=function(){return this.s.toString()},d.prototype.parseArgs=function(a){return null!==a?new d(parseFloat(a)):new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.s,this.s,c))},d}(c);c.UniformScale=f;var g=function(c){function d(a,b){void 0===a&&(a=1),void 0===b&&(b=a);var d=c.call(this,"scale")||this;return d.x=a,d.y=b,d}return b(d,c),d.prototype.args=function(){return this.x+" "+this.y},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return 1===b.length?new d(parseFloat(b[0])):new d(parseFloat(b[0]),parseFloat(b[1]))}return new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.x,this.x,c),a._lerp(b.y,this.y,c))},d}(c);c.Scale=g;var h=function(c){function d(a,b,d){void 0===b&&(b=0),void 0===d&&(d=0);var e=c.call(this,"rotate")||this;return e.a=a,e.x=b,e.y=d,e}return b(d,c),d.prototype.args=function(){return this.a+" "+this.x+" "+this.y},d.prototype.parseArgs=function(a){if(null!==a){var b=a.split(" ");return new d(parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]))}return new d(0)},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c),a._lerp(b.x,this.x,c),a._lerp(b.y,this.y,c))},d}(c);c.Rotate=h;var i=function(c){function d(a){void 0===a&&(a=0);var b=c.call(this,"skewX")||this;return b.a=a,b}return b(d,c),d.prototype.args=function(){return this.a.toString()},d.prototype.parseArgs=function(a){return null!==a?new d(parseFloat(a)):new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c))},d}(c);c.SkewX=i;var j=function(c){function d(a){void 0===a&&(a=0);var b=c.call(this,"skewY")||this;return b.a=a,b}return b(d,c),d.prototype.args=function(){return this.a.toString()},d.prototype.parseArgs=function(a){return null!==a?new d(parseFloat(a)):new d},d.prototype.interpolate=function(b,c){return new d(a._lerp(b.a,this.a,c))},d}(c);c.SkewY=j}(c=a.Transform||(a.Transform={}))}(c=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}return b.prototype.toString=function(){return this.x+" "+this.y+" "+this.width+" "+this.height},b.prototype.parse=function(a){if(null!==a){var c=a.split(" ");return new b(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]))}return new b(0,0,0,0)},b.prototype.get=function(a,c){var d=c.split(":");if(4===d.length){var e=a.getAttribute(d[0]),f=a.getAttribute(d[1]),g=a.getAttribute(d[2]),h=a.getAttribute(d[3]);return null!==e&&null!==f&&null!==g&&null!==h?new b(parseFloat(e),parseFloat(f),parseFloat(g),parseFloat(h)):new b(0,0,0,0)}return this.parse(a.getAttribute(c))},b.prototype.set=function(a,b,c){var d=b.split(":");4===d.length?void 0!==c?(a.setAttribute(d[0],c.x.toString()),a.setAttribute(d[1],c.y.toString()),a.setAttribute(d[2],c.width.toString()),a.setAttribute(d[3],c.height.toString())):(a.setAttribute(d[0],this.x.toString()),a.setAttribute(d[1],this.y.toString()),a.setAttribute(d[2],this.width.toString()),a.setAttribute(d[3],this.height.toString())):void 0!==c?a.setAttribute(b,c.toString()):a.setAttribute(b,this.toString())},b.prototype.interpolate=function(c,d){return new b(a._LengthInterpolate(c.x,this.x,d),a._LengthInterpolate(c.y,this.y,d),a._LengthInterpolate(c.width,this.width,d),a._LengthInterpolate(c.height,this.height,d))},b}();a.Box=b}(b=a.Attribute||(a.Attribute={}))}(a||(a={}));var a;!function(a){var b=function(){function b(b){if(b)if("string"==typeof b){var c=window.document.getElementById(b);if(!(c instanceof SVGSVGElement))throw new Error("Element with specified ID is not valid");this.root=c}else this.root=b;else this.root=window.document.createElementNS(a.XMLNS,"svg"),window.document.body.appendChild(this.root);this.root.setAttribute("xmlns",a.XMLNS),this.root.setAttributeNS(a.XMLNS,"xlink",a.XLINK),this.root.setAttribute("version","1.1");var d=this.root.getElementsByTagName("defs");d.length>0?this.defs=new a.Element(this,d.item(0)):this.defs=new a.Element(this,"defs")}return b.prototype.addDef=function(a){this.defs.add(a)},b}();a.Paper=b}(a||(a={}));var a;return function(a){var b=function(){function b(b,c,d){if(this.paper=b,this._id=Math.random().toString(36).substring(2),"string"==typeof c)this._node=window.document.createElementNS(a.XMLNS,c),void 0!==d&&this.setAttributes(d),this.paper.root.appendChild(this._node),this._node.setAttribute("id",this._id);else{this._node=c;var e=this._node.getAttribute("id");null!==e?this._id=e:this._node.setAttribute("id",this._id)}this._style=window.getComputedStyle(this._node)}return Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),b.prototype.toString=function(){return"url(#"+this._id+")"},b.prototype.setAttribute=function(b,c){a.Attribute.isAttribute(c)?c.set(this,b):this._node.setAttribute(b,String(c))},b.prototype.setAttributes=function(a){for(var b in a){var c=a[b];void 0!==c&&null!==c&&this.setAttribute(b,c)}},b.prototype.copyStyleFrom=function(a){for(var b={},c=a._node.attributes,d=0;d<c.length;++d){var e=c.item(d).name;b[e]=a._style.getPropertyValue(e)}this.setAttributes(b)},b.prototype.getAttribute=function(a){var b=this._style.getPropertyValue(a);return""===b?this._node.getAttribute(a):b},Object.defineProperty(b.prototype,"innerHTML",{get:function(){return this._node.innerHTML},set:function(a){this._node.innerHTML=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"boundingBox",{get:function(){var b=this._node.getBoundingClientRect();return new a.Attribute.Box(b.left,b.top,b.width,b.height)},enumerable:!0,configurable:!0}),b.prototype.add=function(a){this._node.appendChild(a._node)},b.prototype.getChildren=function(){for(var a=this._node.childNodes,c=[],d=0;d<a.length;++d)c.push(new b(this.paper,a.item(d)));return c},b.prototype.clone=function(a){return void 0===a&&(a=!0),new b(this.paper,this._node.cloneNode(a))},b.prototype.addEventListener=function(a,b){this._node.addEventListener(a,b.bind(this))},b}();a.Element=b}(a||(a={})),a});