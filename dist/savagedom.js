/*
 * SavageDOM 0.0.0-development (https://github.com/molisani/SavageDOM) 
 * Copyright 2018 Michael Molisani
 * Licensed under LGPL-3.0 (https://github.com/molisani/SavageDOM/blob/master/LICENSE)
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3"),require("rxjs"),require("rxjs").operators):"function"==typeof define&&define.amd?define("SavageDOM",["d3","rxjs"],e):"object"==typeof exports?exports.SavageDOM=e(require("d3"),require("rxjs"),require("rxjs").operators):t.SavageDOM=e(t.d3,t.rxjs,t.rxjs.operators)}(window,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=64)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.FilterPrimitive=class extends r.Element{constructor(t,e,n={},r=t.getUniquePrimitiveReference()){super(t.context,e,n,`${t.id}-${r}`),this._ref=r,this.setAttribute("result",r),t.add(this)}toString(){return this._ref}}},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),s=n(14);class i{constructor(t,e){this.x=t,this.y=e}toString(){return`${this.x},${this.y}`}parse(t){if(null!==t){const e=t.split(",");return new i(s.LengthParse(e[0]),s.LengthParse(e[1]))}return new i(0,0)}get(t,e){const n=e.split(":");if(2===n.length){const e=t.getAttribute(n[0]),r=t.getAttribute(n[1]);return null!==e&&null!==r?new i(s.LengthParse(e),s.LengthParse(r)):new i(0,0)}return this.parse(t.getAttribute(e))}set(t,e,n){const r=e.split(":");2===r.length?void 0!==n?(t.setAttribute(r[0],n.x.toString()),t.setAttribute(r[1],n.y.toString())):(t.setAttribute(r[0],this.x.toString()),t.setAttribute(r[1],this.y.toString())):void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.Point=i},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(o,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const s=n(12),i=n(20),o=n(16),c=n(25),u=n(10),a=n(24);class l{constructor(t,e,n,r=a.randomShortStringId()){if(this.context=t,this._id=r,this._pendingRenders=[],this._linkedAttributes={},"string"==typeof e)this._node=this.context.window.document.createElementNS(u.XMLNS,e),this.context.addChild(this._node),void 0!==n&&this.setAttributes(n),this._node.setAttribute("id",this._id);else{this._node=e;const t=this._node.getAttribute("id");null!==t?this._id=t:this._node.setAttribute("id",this._id)}this._style=this.context.window.getComputedStyle(this._node)}get id(){return this._id}get node(){return this._node}toString(){return`url(#${this._id})`}renderAttribute(t,e){i.isAttribute(e)?e.set(this._node,t):Array.isArray(e)?this._node.setAttribute(t,e.join("\t")):this._node.setAttribute(t,String(e))}setAttribute(t,e){const n=this.context.renderer.queueAttributeUpdate(this,t,e);this._pendingRenders.push(n)}setAttributes(t){const e=this.context.renderer.queueAttributeUpdate(this,t);this._pendingRenders.push(e)}animateAttribute(t,e,n,r){let s;if("number"==typeof e)s=new c.NumberWrapper(e);else{if(!i.isAttribute(e))return;s=e}const o=s.get(this._node,t);return this.context.renderer.registerAttributeInterpolation(this,t,s.interpolator(o),n,r)}linkDynamicAttribute(t,e){const n=this.context.renderer.subscribeAttributeObservable(this,t,e),r=this._linkedAttributes[t];return r&&!r.closed&&r.unsubscribe(),this._linkedAttributes[t]=n,n}flush(){return r(this,void 0,void 0,function*(){if(0===this._pendingRenders.length)return Date.now();const t=Promise.all(this._pendingRenders);this._pendingRenders=[];const e=yield t;return Math.max(...e)})}getAttribute(t){const e=this._node.getAttribute(t)||this._style.getPropertyValue(t);return""===e||"none"===e?null:e}copyStyleFrom(t,e,n=!0){const r={},s=t._node.attributes;if(e)for(let i=0;i<s.length;++i){const o=s.item(i);if(o){const s=o.name;(!0===e[s]||n)&&(r[s]=t._style.getPropertyValue(s))}}else for(let e=0;e<s.length;++e){const n=s.item(e);if(n){const e=n.name;r[e]=t._style.getPropertyValue(e)}}this.setAttributes(r)}getEvent(t){return s.fromEvent(this._node,t)}getEvents(...t){return s.merge(...t.map(t=>s.fromEvent(this._node,t)))}get boundingBox(){const t=this._node.getBoundingClientRect();return new o.Box(t.left,t.top,t.width,t.height)}add(t){t instanceof SVGElement?this._node.appendChild(t):this._node.appendChild(t._node)}getChildren(){const t=this._node.childNodes,e=[];for(let n=0;n<t.length;++n)e.push(new l(this.context,t.item(n)));return e}clone(t=!0,e=a.randomShortStringId()){const n=new l(this.context,this._node.cloneNode(t));return n._id=e,n._node.setAttribute("id",n._id),n}destroy(){this._node.remove()}cloneNode(t=!0){const e=this._node.cloneNode(t);return e.setAttribute("id",a.randomShortStringId()),e}}e.Element=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6);e.AbstractShape=class extends r.AbstractRenderable{}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);e.Transform=class{constructor(t){this.type=t}toString(){return`${this.type}(${this.args()})`}parse(t){return null!==t?this.parseArgs(t.substring(t.indexOf("(")+1,t.length-1)):this.parseArgs(t)}get(t,e){const n=e.split(".");if(2===n.length&&n[1]===this.type){const e=t.getAttribute(n[0]);if(e){const t=e.indexOf(this.type);if(t>-1)return this.parse(e.substring(t,e.indexOf(")",t)+1))}}return this.parse(null)}set(t,e,n){const r=String(void 0===n?this:n),s=e.split(".");if(2===s.length&&s[1]===this.type){const e=t.getAttribute(s[0]);if(e){const n=e.indexOf(this.type);if(n>-1){const i=`${e.substr(0,n)}${r}${e.substr(e.indexOf(")",n)+1)}`;t.setAttribute(s[0],i)}else t.setAttribute(s[0],r)}else t.setAttribute(s[0],r)}else t.setAttribute(e,r)}interpolator(t){const e=r.interpolateTransformSvg(t.toString(),this.toString());return t=>this.parse(e(t))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(13),s=n(2),i=n(3);e.AbstractRenderable=class extends i.Element{getPointEvents(...t){return this.getEvents(...t).pipe(r.map(t=>{let e;if(t instanceof MouseEvent)e=t;else{if(!(t instanceof TouchEvent))throw new Error(`The event "${t.type}" is not a PointEvent and thus has no corresponding Point`);e=t.touches[0]}const n=this.context.calculateLocalPoint(this.node,e);return Object.assign({},t,{local:new s.Point(n.x,n.y),page:new s.Point(e.pageX,e.pageY),screen:new s.Point(e.screenX,e.screenY)})}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.AbstractNonRenderable=class extends r.Element{}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);class s{constructor(t,e){this.value=t,this.unit=e}toString(){return`${this.value}${this.unit}`}parse(t){if(null!==t){const e=t.match(/(\d+|\d+\.\d+)(\w+|%)/i);return null!==e?this._convert(parseFloat(e[1]),e[2]):new s(parseFloat(t),this.unit)}return new s(0,this.unit)}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=this._convert(t.value,t.unit),n=r.interpolate(e.toString(),this.toString());return t=>this.parse(n(t))}_convert(t,e){const n=s.convert[this.unit]/s.convert[e]||1;return new s(t*n,this.unit)}}s.convert={px:1,in:96,cm:254/96,mm:25.4/96,pt:.75,pc:9,deg:1,grad:.9,rad:180/Math.PI,turn:360},e.Dimension=s;e.Percentage=class extends s{constructor(t){super(t,"%")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(19),s=n(6);class i extends s.AbstractRenderable{constructor(t,e,n=[]){super(t,"g",e),this.constructor.name!==i.name&&this._node.setAttribute("data-class",this.constructor.name),n.forEach(t=>this.add(t))}toPattern(t,e,n,s,i){const o=new r.Pattern(this.context,t,e,n,s,i);return this.getChildren().forEach(t=>o.add(t)),o}}e.Group=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XMLNS="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink"},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(o,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const s=n(12),i=n(13),o=n(21),c=n(2),u=n(10),a=n(15),l=n(3),d=n(26),h=n(27),p=n(28),f=n(29),b=n(30),g=n(19),m=n(31),_=n(36),v=n(9),w=n(37),P=n(38),y=n(39),x=n(40),S=n(41),A=n(42),T=n(43),O=n(44),M=n(45);class I{constructor(t,e=window,n=o.Renderer.getInstance()){if(this._window=e,this._renderer=n,t)if("string"==typeof t){const e=this._window.document.getElementById(t);if(!function(t){return!!t&&"svg"===t.tagName}(e))throw new Error("Element with specified ID is not valid");this._root=e}else this._root=t;else this._root=this._window.document.createElementNS(u.XMLNS,"svg"),this._window.document.body.appendChild(this._root);this._root.setAttribute("xmlns",u.XMLNS),this._root.setAttributeNS(u.XMLNS,"xlink",u.XLINK),this._root.setAttribute("version","1.1"),this._target=this._root;const r=this._root.getElementsByTagName("defs").item(0);this._defs=r?new l.Element(this,r):new l.Element(this,"defs"),I._CONTEXT_SUBJECT.next(this)}static get contexts(){return I._CONTEXT_SUBJECT.asObservable()}get window(){return this._window}get renderer(){return this._renderer}calculateLocalPoint(t,e){const n=this._root.createSVGPoint();n.x=e.clientX,n.y=e.clientY;const r=t.getScreenCTM();if(!r)throw new Error(`No Screen Coordinate Transform Matrix found for node "${t.id}"`);return n.matrixTransform(r.inverse())}get mousePosition(){return s.fromEvent(this._root,"mousemove").pipe(i.map(t=>{const e=this.calculateLocalPoint(this._root,t);return Object.assign({},t,{local:new c.Point(e.x,e.y),page:new c.Point(t.pageX,t.pageY),screen:new c.Point(t.screenX,t.screenY)})}))}addDef(t){this._defs.add(t)}addChild(t){this._target.appendChild(t instanceof l.Element?t.node:t)}load(t){return r(this,void 0,void 0,function*(){const e=yield a.makeRequest("GET",t),n=new a.SVGDocument(this,e);return new m.ExternalSVG(this,n)})}clipPath(...t){return new d.ClipPath(this,...t)}marker(...t){return new h.Marker(this,...t)}mask(...t){return new p.Mask(this,...t)}linearGradient(...t){return new f.LinearGradient(this,...t)}radialGradient(...t){return new b.RadialGradient(this,...t)}pattern(...t){return new g.Pattern(this,...t)}foreignObject(...t){return new _.ForeignObject(this,...t)}group(...t){return new v.Group(this,...t)}imageAfterLoad(...t){return r(this,void 0,void 0,function*(){return w.Image.afterLoad(this,...t)})}circle(...t){return new P.Circle(this,...t)}ellipse(...t){return new y.Ellipse(this,...t)}line(...t){return new x.Line(this,...t)}path(...t){return new S.Path(this,...t)}polygon(...t){return new A.Polygon(this,...t)}polyline(...t){return new T.Polyline(this,...t)}rect(...t){return new O.Rect(this,...t)}text(...t){return new M.Text(this,...t)}}I._CONTEXT_SUBJECT=new s.ReplaySubject(1),e.Context=I},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8);e.LengthParse=(t=>{const e=t.match(/(\d+|\d+\.\d+)(\w+|%)/i);return null!==e?new r.Dimension(parseFloat(e[1]),e[2]):parseFloat(t)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGDocument=class{constructor(t,e,n="application/xml",r=new DOMParser){this._document=e instanceof Document?e:r.parseFromString(e,n),Array.from(this._document.getElementsByTagName("defs")).forEach(e=>{if(e.parentNode){const n=e.parentNode.removeChild(e);for(;n.children.length>0;)t.addDef(n.children[0])}})}get children(){return this._document.documentElement?Array.prototype.slice.call(this._document.documentElement.children):[]}},e.makeRequest=((t,e)=>new Promise((n,r)=>{const s=new XMLHttpRequest;s.open(t,e,!0),s.onload=(()=>{if(s.status>=200&&s.status<300){const t=s.responseXML;null!==t?n(t):r({status:s.status,statusText:s.statusText})}}),s.onerror=(()=>{r({status:s.status,statusText:s.statusText})}),s.send()}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);class s{constructor(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}toString(){return`${this.x} ${this.y} ${this.width} ${this.height}`}parse(t){if(null!==t){const e=t.split(" ");return new s(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]))}return new s(0,0,0,0)}get(t,e){const n=e.split(":");if(4===n.length){const e=t.getAttribute(n[0]),r=t.getAttribute(n[1]),i=t.getAttribute(n[2]),o=t.getAttribute(n[3]);return null!==e&&null!==r&&null!==i&&null!==o?new s(parseFloat(e),parseFloat(r),parseFloat(i),parseFloat(o)):new s(0,0,0,0)}return this.parse(t.getAttribute(e))}set(t,e,n){const r=e.split(":");4===r.length?void 0!==n?(t.setAttribute(r[0],n.x.toString()),t.setAttribute(r[1],n.y.toString()),t.setAttribute(r[2],n.width.toString()),t.setAttribute(r[3],n.height.toString())):(t.setAttribute(r[0],this.x.toString()),t.setAttribute(r[1],this.y.toString()),t.setAttribute(r[2],this.width.toString()),t.setAttribute(r[3],this.height.toString())):void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.Box=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),s=n(3),i=n(18);class o extends s.Element{constructor(t,e,n){super(t,"stop",{offset:new r.Dimension(100*e,"%"),"stop-color":n}),this.offset=e}}e.Stop=o;e.AbstractGradient=class extends i.AbstractPaintServer{constructor(t,e,n,r){super(t,e,r),this.context.addDef(this);const s=[];Object.keys(n).forEach(e=>{s.push(new o(t,Number(e),n[e]))}),s.sort((t,e)=>t.offset-e.offset),s.forEach(t=>this.add(t))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7);e.AbstractPaintServer=class extends r.AbstractNonRenderable{}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(18);class s extends r.AbstractPaintServer{constructor(t,e,n=(e instanceof SVGPatternElement?0:e),r=0,s=0,i){super(t,e instanceof SVGPatternElement?e:"pattern",function(t,e,n,r,s){const i={};return t instanceof SVGPatternElement||(i.width=t,i.height=e,i.x=n,i.y=r,s?i.viewBox=s:i.patternUnits="userSpaceOnUse"),i}(e,n,r,s,i)),this.context.addDef(this)}clone(t=!0){return new s(this.context,super.cloneNode(t))}}e.Pattern=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttribute=(t=>t&&"function"==typeof t.interpolator&&"function"==typeof t.parse)},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(22)),r(n(65))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=(t,e)=>({a:1-3*e+3*t,b:3*e-6*t,c:3*t}),s=(t,e)=>((e.a*t+e.b)*t+e.c)*t,i=(t,e)=>(3*e.a*t+2*e.b)*t+e.c;e.cubicBezier=((t,e,n,o)=>{if(t===e&&n===o)return t=>t;const c=r(t,n),u=r(e,o),a=new Float32Array(17);for(let t=0;t<17;++t)a[t]=s(t/16,c);return t=>s(((t,e,n)=>{const r=Math.min(Math.max(t.findIndex(t=>t>e)-1,1),t.length-1);let o=((e-t[r])/(t[r+1]-t[r])+r-1)/16;for(let t=0;t<5;++t){const t=i(o,n);if(0===t)break;o-=(s(o,n)-e)/t}return o})(a,t,c),u)});const o=t=>e=>1-t(1-e),c=(t,e)=>n=>n<.5?t(2*n)/2:e(2*n-1)/2+.5,u=1.70158;e.linear=(t=>t),e.step=Math.round,e.quadraticIn=(t=>Math.pow(t,2)),e.quadraticOut=o(e.quadraticIn),e.quadratic=c(e.quadraticIn,e.quadraticOut),e.cubicIn=(t=>Math.pow(t,3)),e.cubicOut=o(e.cubicIn),e.cubic=c(e.cubicIn,e.cubicOut),e.quarticIn=(t=>Math.pow(t,4)),e.quarticOut=o(e.quarticIn),e.quartic=c(e.quarticIn,e.quarticOut),e.quinticIn=(t=>Math.pow(t,5)),e.quinticOut=o(e.quinticIn),e.quintic=c(e.quinticIn,e.quinticOut),e.sineIn=(t=>1-Math.cos(t*Math.PI/2)),e.sineOut=o(e.sineIn),e.sine=c(e.sineIn,e.sineOut),e.exponentialIn=(t=>Math.pow(2,10*(t-1))),e.exponentialOut=o(e.exponentialIn),e.exponential=c(e.exponentialIn,e.exponentialOut),e.circularIn=(t=>1-Math.sqrt(1-Math.pow(t,2))),e.circularOut=o(e.circularIn),e.circular=c(e.circularIn,e.circularOut),e.backIn=(t=>Math.pow(t,2)*((u+1)*t-u)),e.backOut=o(e.backIn),e.back=c(e.backIn,e.backOut),e.elasticIn=(t=>Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1),e.elasticOut=o(e.elasticIn),e.elastic=c(e.elasticIn,e.elasticOut)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomShortStringId=(()=>Math.random().toString(36).substring(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);class s{constructor(t=0){this.n=t}toString(){return this.n.toString()}parse(t){return null!==t?new s(parseFloat(t)):new s}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){t.setAttribute(e,(void 0!==n?n:this).toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.NumberWrapper=s;class i{constructor(t=[]){this.arr=t}toString(){return this.arr.join("\t")}parse(t){if(null!==t){const e=t.split("\t");return new i(this.arr.map((t,n)=>t.parse(n>=e.length?null:e[n])))}return new i(this.arr.map(t=>t.parse(null)))}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){t.setAttribute(e,(void 0!==n?n:this).toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.ArrayWrapper=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7);e.ClipPath=class extends r.AbstractNonRenderable{constructor(t,e,n,r,s,i,o){super(t,"clipPath",function(t,e,n,r,s,i){return{width:t,height:e,x:n,y:r,maskUnits:s,maskContentUnits:i}}(e,n,r,s,i,o)),this.context=t,this.context.addDef(this)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7);e.Marker=class extends r.AbstractNonRenderable{constructor(t,e){super(t,"marker",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7);e.Mask=class extends r.AbstractNonRenderable{constructor(t,e,n,r,s,i,o){super(t,"mask",function(t,e,n,r,s,i){return{width:t,height:e,x:n,y:r,maskUnits:s,maskContentUnits:i}}(e,n,r,s,i,o)),this.context=t,this.context.addDef(this)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(17);e.LinearGradient=class extends r.AbstractGradient{constructor(t,e,n){super(t,"linearGradient",e,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(17);e.RadialGradient=class extends r.AbstractGradient{constructor(t,e,n){super(t,"radialGradient",e,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(11),s=n(15),i=n(32),o=n(9);e.ExternalSVG=class extends o.Group{constructor(t,e,n){super(t,n),e.children.forEach(e=>{const n=t.window.document.importNode(e,!0);this.add(n)})}},e.buildExternalComponentClass=function(t,e={x:0,y:0}){const n=s.makeRequest("GET",t),o=r.Context.contexts.toPromise(),c=Promise.all([o,n]).then(([t,e])=>new s.SVGDocument(t,e));return class extends i.Component{constructor(){super(e),this.loaded=c.then(t=>{t.children.forEach(t=>{const e=this.context.window.document.importNode(t,!0);this.add(e)})}),this._node.setAttribute("data-source-url",t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22),s=n(33),i=n(34),o=n(35),c=n(11),u=n(9);class a extends u.Group{constructor(t,e=r.linear){super(a.context),this.easing=e,this._hidden=!1;const n=[new o.Translate_Transform,new s.Rotate_Transform(0),new i.Scale_Transform];t&&n.push(new o.Translate_Transform(-t.x,-t.y)),this.setAttribute("transform",n)}static get context(){if(!a._CONTEXT)throw new ReferenceError("No static Component context found. Set one manually, or subscribe to the latest created context.");return a._CONTEXT}static set context(t){a._CONTEXT_SUBSCRIPTION&&a._CONTEXT_SUBSCRIPTION.unsubscribe(),a._CONTEXT=t}static subscribeLatestContext(){a._CONTEXT_SUBSCRIPTION||(a._CONTEXT_SUBSCRIPTION=c.Context.contexts.subscribe(t=>{a._CONTEXT=t}))}moveTo(t,e,n=0){0===n?this.setAttribute("transform.translate",new o.Translate_Transform(t,e)):this.animateAttribute("transform.translate",new o.Translate_Transform(t,e),n,this.easing)}rotate(t,e=0){0===e?this.setAttribute("transform.rotate",new s.Rotate_Transform(t)):this.animateAttribute("transform.rotate",new s.Rotate_Transform(t),e,this.easing)}scale(t,e=t,n=0){0===n?this.setAttribute("transform.scale",new i.Scale_Transform(t,e)):this.animateAttribute("transform.scale",new i.Scale_Transform(t,e),n,this.easing)}show(){this._hidden||(this.setAttribute("opacity",1),this._hidden=!1)}hide(){this._hidden&&(this.setAttribute("opacity",0),this._hidden=!0)}}e.Component=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);class s extends r.Transform{constructor(t,e=0,n=0){super("rotate"),this.a=t,this.x=e,this.y=n}args(){return`${this.a} ${this.x} ${this.y}`}parseArgs(t){if(null!==t){const e=t.split(" ");return new s(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]))}return new s(0)}}e.Rotate_Transform=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);class s extends r.Transform{constructor(t=1){super("scale"),this.s=t}args(){return this.s.toString()}parseArgs(t){return null!==t?new s(parseFloat(t)):new s}}e.UniformScale_Transform=s;class i extends r.Transform{constructor(t=1,e=t){super("scale"),this.x=t,this.y=e}args(){return`${this.x} ${this.y}`}parseArgs(t){if(null!==t){const e=t.split(" ");return 1===e.length?new i(parseFloat(e[0])):new i(parseFloat(e[0]),parseFloat(e[1]))}return new i}}e.Scale_Transform=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);class s extends r.Transform{constructor(t=0,e=0){super("translate"),this.x=t,this.y=e}args(){return`${this.x} ${this.y}`}parseArgs(t){if(null!==t){const e=t.split(" ");return 1===e.length?new s(parseFloat(e[0])):new s(parseFloat(e[0]),parseFloat(e[1]))}return new s}}e.Translate_Transform=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6);e.ForeignObject=class extends r.AbstractRenderable{constructor(t,e,n){super(t,"foreignObject",e),n&&this.addHTML(n)}addHTML(t){this._node.appendChild(t)}remove(t){this._node.removeChild(t)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(o,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const s=n(6);class i extends s.AbstractRenderable{static afterLoad(t,e,n={}){return r(this,void 0,void 0,function*(){const r=new i(t,n),s=r.getEvent("load").toPromise();return r.setAttribute("href",e),yield s,r})}constructor(t,e){super(t,"image",e)}}e.Image=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(2),s=n(4);e.Circle=class extends s.AbstractShape{constructor(t,...e){super(t,"circle",function(t,e,n){return t instanceof r.Point?{"cx:cy":t,r:e}:{cx:t,cy:e,r:n}}(...e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(2),s=n(4);e.Ellipse=class extends s.AbstractShape{constructor(t,...e){super(t,"ellipse",function(t,e,n,s){let i={};const o=t instanceof r.Point,c=e instanceof r.Point;return o&&c?i={"cx:cy":t,"rx:ry":e}:o||c||(i={cx:t,cy:e,rx:n,ry:s}),i}(...e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(2),s=n(4);e.Line=class extends s.AbstractShape{constructor(t,...e){super(t,"line",function(t,e,n,s){let i={};const o=t instanceof r.Point,c=e instanceof r.Point;return o&&c?i={"x1:y1":t,"x2:y2":e}:o||c||(i={x1:t,y1:e,x2:n,y2:s}),i}(...e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4);e.Path=class extends r.AbstractShape{constructor(t,e,n){super(t,"path",function(t,e){return{d:t,pathLength:e}}(e,n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4);e.Polygon=class extends r.AbstractShape{constructor(t,e){super(t,"polygon",function(t){return{points:t}}(e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4);e.Polyline=class extends r.AbstractShape{constructor(t,e){super(t,"polyline",function(t){return{points:t}}(e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(16),s=n(2),i=n(4);e.Rect=class extends i.AbstractShape{constructor(t,...e){super(t,"rect",function(t,e,n,i,o,c){const u={};return t instanceof r.Box?(u["x:y:width:height"]=t,e instanceof s.Point?u["rx:ry"]=e:(void 0!==e&&(u.rx=e),void 0!==n&&(u.ry=n))):t instanceof s.Point?(u["x:y"]=t,void 0===e||e instanceof s.Point||(u.width=e),void 0!==n&&(u.height=n),i instanceof s.Point?u["rx:ry"]=i:(void 0!==i&&(u.rx=i),void 0===o||o instanceof s.Point||(u.ry=o))):(u.x=t,void 0===e||e instanceof s.Point||(u.y=e),void 0!==n&&(u.width=n),void 0===i||i instanceof s.Point||(u.height=i),o instanceof s.Point?u["rx:ry"]=o:(void 0!==o&&(u.rx=o),void 0!==c&&(u.ry=c))),u}(...e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),s=n(2),i=n(46),o=n(6);class c extends o.AbstractRenderable{constructor(t,e){super(t,"tspan",e)}get computedLength(){return this._node.getComputedTextLength()}}e.TextSpan=c;class u extends o.AbstractRenderable{constructor(t,e,n,r){super(t,"text",function(t,e){return t instanceof s.Point?{"x:y":t}:{x:t,y:e}}(n,r)),e&&this.addSpan(e)}addSpan(t,e,n=!0){const s=new c(this.context);return s.setAttribute("textContent",new i.TextContent(t)),e&&(s.setAttribute("x",parseFloat(this.getAttribute("x")||"0")),"number"==typeof e?s.setAttribute("dy",new r.Dimension(e,"em")):s.setAttribute("dy",e)),this.add(s),s}get computedLength(){return this._node.getComputedTextLength()}}e.Text=u;e.MultilineText=class extends u{constructor(t,e,n,r){super(t,"",r["x:y"]||r.x,r.y);const s=new u(t,"",r["x:y"]||r.x,r.y);s.setAttribute("opacity",0);const o=new c(t,r);s.add(o);const a=[""];e.split(" ").forEach((t,e)=>{const r=a[a.length-1],s=0===r.length?t:`${r} ${t}`,c=new i.TextContent(s);o.setAttribute("textContent",c),o.computedLength>n&&r.length>0?a.push(t):a[a.length-1]=s}),a.forEach(t=>{t.length>0&&this.addSpan(t,1)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);class s{static escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}constructor(t){this._cb="string"==typeof t?()=>t:t}toString(){return this._cb()}parse(t){return new s(t||"")}get(t,e){return this.parse(t.textContent)}set(t,e,n){t.textContent=s.escapeHtml(this._cb())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.TextContent=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Blend_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feBlend",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.ColorMatrix_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feColorMatrix",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3),s=n(0);e.TransferFunction_Primitive=class extends r.Element{constructor(t,e,n){super(t.context,`feFunc${e}`,n)}};e.ComponentTransfer_Primitive=class extends s.FilterPrimitive{constructor(t,e){super(t,"feComponentTransfer",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Composite_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feComposite",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.ConvolveMatrix_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feConvolveMatrix",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.DisplacementMap_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feDisplacementMap",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Flood_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feFlood",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.GaussianBlur_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feGaussianBlur",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Image_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feImage",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.DiffuseLighting=class extends r.FilterPrimitive{constructor(t,e){super(t,"feDiffuseLighting",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);class s extends r.Element{constructor(t,e,n){super(t.context,e,n)}}e.AbstractLightSource=s;e.DistantLight=class extends s{constructor(t,e){super(t,"feDistantLight",e)}};e.PointLight=class extends s{constructor(t,e){super(t,"fePointLight",e)}};e.SpotLight=class extends s{constructor(t,e){super(t,"feSpotLight",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.SpecularLighting=class extends r.FilterPrimitive{constructor(t,e){super(t,"feSpecularLighting",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.MergeNode_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feMergeNode",e)}};e.Merge_Primitive=class extends r.FilterPrimitive{constructor(t){super(t,"feMerge")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Morphology_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feMorphology",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Offset_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feOffset",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Tile_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feTile",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Turbulence_Primitive=class extends r.FilterPrimitive{constructor(t,e){super(t,"feTurbulence",e)}}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(20)),r(n(10)),r(n(11)),r(n(15)),r(n(3)),r(n(69));const s=n(21);e.Animation=s;const i=n(70);e.Attributes=i;const o=n(80);e.Elements=o},function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(o,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const s=n(12),i=n(13),o=n(24);class c{constructor(t=s.interval(0,s.animationFrameScheduler)){this._animationFrames=t,this._attributeUpdates=new s.Subject,this._attributeInterpolations={},this.startRendering()}static getInstance(t){return c._instance||(c._instance=new c(t)),c._instance}startRendering(){this._renderSubscription&&!this._renderSubscription.closed||(this._renderSubscription=this._attributeUpdates.pipe(i.bufferWhen(()=>this._animationFrames)).subscribe(t=>this._render(t)))}stopRendering(){return r(this,void 0,void 0,function*(){const t=this._renderSubscription;if(t){const e=new Promise(e=>t.add(e));return t.unsubscribe(),e}})}queueAttributeUpdate(t,e,n){if("string"==typeof e)return new Promise(r=>{this._attributeUpdates.next({el:t,attribute:{name:e,val:n},resolve:r})});if("object"==typeof e)return Promise.all(Object.keys(e).map(n=>new Promise(r=>{this._attributeUpdates.next({el:t,attribute:{name:n,val:e[n]},resolve:r})}))).then(t=>Math.max(...t));throw new Error("No attributes specified for attribute update")}registerAttributeInterpolation(t,e,n,r,s){return new Promise(i=>{const c=o.randomShortStringId(),u=Date.now(),a=[{name:e,val:n}];this._attributeInterpolations[c]={el:t,attributes:a,start:u,duration:r,easing:s,resolve:i}})}subscribeAttributeObservable(t,e,n){return n.pipe(i.bufferWhen(()=>this._animationFrames),i.filter(t=>t.length>0),i.map(n=>({el:t,attribute:{name:e,val:n[n.length-1]}}))).subscribe(this._attributeUpdates)}_render(e){const n=Date.now(),r=[];e.forEach(({el:t,attribute:e,resolve:n})=>{t.renderAttribute(e.name,e.val),n&&r.push(n)}),Object.keys(this._attributeInterpolations).forEach(t=>{const e=this._attributeInterpolations[t],s=n>=e.start+e.duration,i=s?1:e.easing((n-e.start)/e.duration);e.attributes.forEach(t=>{const n=t.val(i);e.el.renderAttribute(t.name,n)}),s&&(delete this._attributeInterpolations[t],e.resolve&&r.push(e.resolve))}),r.length>0&&t(()=>{r.forEach(t=>t(n))})}}e.Renderer=c}).call(this,n(66).setImmediate)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(s.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(67),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(23))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,s,i,o,c,u=1,a={},l=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){f(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(s=d.documentElement,r=function(t){var e=d.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,s.removeChild(e),e=null},s.appendChild(e)}):r=function(t){setTimeout(f,0,t)}:(o="setImmediate$"+Math.random()+"$",c=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",c,!1):t.attachEvent("onmessage",c),r=function(e){t.postMessage(o+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return a[u]=s,r(u),u++},h.clearImmediate=p}function p(t){delete a[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=a[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(23),n(68))},function(t,e){var n,r,s=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,a=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?a=u.concat(a):d=-1,a.length&&p())}function p(){if(!l){var t=c(h);l=!0;for(var e=a.length;e;){for(u=a,a=[];++d<e;)u&&u[d].run();d=-1,e=a.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function b(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new f(t,e)),1!==a.length||l||c(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._lerp=((t,e,n)=>t+(e-t)*n)},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(14)),r(n(16)),r(n(71)),r(n(72)),r(n(8)),r(n(73)),r(n(74)),r(n(75)),r(n(2)),r(n(76)),r(n(46)),r(n(5)),r(n(25));const s=n(77);e.Transforms=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);!function(t){class e{constructor(t=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,0]]){this.type="matrix",this.arr=[],this.arr=this.arr.concat(...t)}toString(){return this.arr.join(" ")}parse(t){return new e(null!==t?[t.split(" ").map(parseFloat)]:[])}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}t.Raw=e;class n{constructor(t=1){this.value=t,this.type="saturate"}toString(){return this.value.toString()}parse(t){return null!==t?new n(parseFloat(t)):new n}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}t.Saturate=n;class s{constructor(t=0){this.value=t,this.type="hueRotate"}toString(){return this.value.toString()}parse(t){return null!==t?new s(parseFloat(t)):new s}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}t.HueRotate=s;t.LuminanceToAlphaColorMatrix=class{constructor(){this.type="luminanceToAlpha"}toString(){return""}}}(e.ColorMatrix||(e.ColorMatrix={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),s=n(1);class i{constructor(t,e=i.DEFAULT_INTERPOLATION){if(this.interpolationFactory=e,"string"==typeof t){const e=r.color(t);if(!e)throw new Error(`Unable to parse color from string "${t}"`);this._data=e}else this._data=r.color(t)}asRGB(){return r.rgb(this._data)}asHSL(){return r.hsl(this._data)}toString(){return this._data.toString()}parse(t){return new i(null!==t?t:"#000")}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=this.interpolationFactory(t.toString(),this.toString());return t=>this.parse(e(t))}}i.DEFAULT_INTERPOLATION=s.interpolateRgb,e.Color=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);class s{constructor(t){this.arr=[],this.arr=this.arr.concat(...t)}toString(){return this.arr.join(" ")}parse(t){return new s(null!==t?[t.split(" ").map(parseFloat)]:[])}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.Matrix=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);class s{constructor(t,e){this.n=t,this.o=e}toString(){return void 0!==this.o?`${this.n},${this.o}`:this.n.toString()}parse(t){if(null!==t){const e=t.split(",");return 1===e.length?new s(parseFloat(e[0])):new s(parseFloat(e[0]),parseFloat(e[1]))}return new s(0)}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.NumberOptionalNumber=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),s=n(14),i=n(2);class o{constructor(t){this.command=t}parse(t){return null!==t?this.parseArgs(t.substr(2)):this.defaultInstance()}get(t,e){return this.parse(t.getAttribute(e))}set(t,e,n){void 0!==n?t.setAttribute(e,n.toString()):t.setAttribute(e,this.toString())}interpolator(t){const e=r.interpolate(t.toString(),this.toString());return t=>this.parse(e(t))}}e.PathSegment=o,function(t){let e;!function(t){t.MoveToAbs="M",t.MoveToRel="m",t.ClosePath="Z",t.LineToAbs="L",t.LineToRel="l",t.LineToHorizontalAbs="H",t.LineToHorizontalRel="h",t.LineToVerticalAbs="V",t.LineToVerticalRel="v",t.CurveToCubicAbs="C",t.CurveToCubicRel="c",t.CurveToCubicSmoothAbs="S",t.CurveToCubicSmoothRel="s",t.CurveToQuadraticAbs="Q",t.CurveToQuadraticRel="q",t.CurveToQuadraticSmoothAbs="T",t.CurveToQuadraticSmoothRel="t",t.ArcToAbs="A",t.ArcToRel="a"}(e=t.Command||(t.Command={}));class n extends t{constructor(t,e=0){super(t),this.l=e}toString(){return`${this.command} ${this.l.toString()}`}parseArgs(t){return this.buildInstance(s.LengthParse(t))}}t.SingleLength=n;class r extends t{constructor(t,e=new i.Point(0,0)){super(t),this.p=e}toString(){return`${this.command} ${this.p.toString()}`}parseArgs(t){return this.buildInstance(this.p.parse(t))}}t.SinglePoint=r;class o extends t{constructor(t,e=new i.Point(0,0),n=new i.Point(0,0)){super(t),this.p1=e,this.p2=n}toString(){return`${this.command} ${this.p1.toString()} ${this.p2.toString()}`}parseArgs(t){const e=t.split(" ");return this.buildInstance(this.p1.parse(e[0]),this.p2.parse(e[1]))}}t.DoublePoint=o;class c extends t{constructor(t,e=new i.Point(0,0),n=new i.Point(0,0),r=new i.Point(0,0)){super(t),this.p1=e,this.p2=n,this.p3=r}toString(){return`${this.command} ${this.p1.toString()} ${this.p2.toString()} ${this.p3.toString()}`}parseArgs(t){const e=t.split(" ");return this.buildInstance(this.p1.parse(e[0]),this.p2.parse(e[1]),this.p3.parse(e[2]))}}t.TriplePoint=c;class u extends r{constructor(t=new i.Point(0,0),n=0){super(e.MoveToAbs,t instanceof i.Point?t:new i.Point(t,n))}buildInstance(t){return new u(t)}defaultInstance(){return new u}}t.MoveToAbs=u;class a extends r{constructor(t=new i.Point(0,0),n=0){super(e.MoveToRel,t instanceof i.Point?t:new i.Point(t,n))}buildInstance(t){return new a(t)}defaultInstance(){return new a}}t.MoveToRel=a;class l extends t{constructor(){super(e.ClosePath)}toString(){return e.ClosePath}parseArgs(t){return new l}defaultInstance(){return new l}}t.ClosePath=l;class d extends r{constructor(t=new i.Point(0,0),n=0){super(e.LineToAbs,t instanceof i.Point?t:new i.Point(t,n))}buildInstance(t){return new d(t)}defaultInstance(){return new d}}t.LineToAbs=d;class h extends r{constructor(t=new i.Point(0,0),n=0){super(e.LineToRel,t instanceof i.Point?t:new i.Point(t,n))}buildInstance(t){return new h(t)}defaultInstance(){return new h}}t.LineToRel=h;class p extends n{constructor(t=0){super(e.LineToHorizontalAbs,t)}buildInstance(t){return new p(t)}defaultInstance(){return new p}}t.LineToHorizontalAbs=p;class f extends n{constructor(t=0){super(e.LineToHorizontalRel,t)}buildInstance(t){return new f(t)}defaultInstance(){return new f}}t.LineToHorizontalRel=f;class b extends n{constructor(t=0){super(e.LineToVerticalAbs,t)}buildInstance(t){return new b(t)}defaultInstance(){return new b}}t.LineToVerticalAbs=b;t.LineToVerticalRel=class extends n{constructor(t=0){super(e.LineToVerticalRel,t)}buildInstance(t){return new b(t)}defaultInstance(){return new b}};class g extends c{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r=new i.Point(0,0),s,o,c){const u=t instanceof i.Point?t:new i.Point(t,n),a=n instanceof i.Point?n:new i.Point(r,s),l=r instanceof i.Point?r:new i.Point(o,c);super(e.CurveToCubicAbs,u,a,l)}buildInstance(t,e,n){return new g(t,e,n)}defaultInstance(){return new g}}t.CurveToCubicAbs=g;class m extends c{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r=new i.Point(0,0),s,o,c){const u=t instanceof i.Point?t:new i.Point(t,n),a=n instanceof i.Point?n:new i.Point(r,s),l=r instanceof i.Point?r:new i.Point(o,c);super(e.CurveToCubicRel,u,a,l)}buildInstance(t,e,n){return new m(t,e,n)}defaultInstance(){return new m}}t.CurveToCubicRel=m;class _ extends o{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r,s){const o=t instanceof i.Point?t:new i.Point(t,n),c=n instanceof i.Point?n:new i.Point(r,s);super(e.CurveToCubicSmoothAbs,o,c)}buildInstance(t,e){return new _(t,e)}defaultInstance(){return new _}}t.CurveToCubicSmoothAbs=_;class v extends o{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r,s){const o=t instanceof i.Point?t:new i.Point(t,n),c=n instanceof i.Point?n:new i.Point(r,s);super(e.CurveToCubicSmoothRel,o,c)}buildInstance(t,e){return new v(t,e)}defaultInstance(){return new v}}t.CurveToCubicSmoothRel=v;class w extends o{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r,s){const o=t instanceof i.Point?t:new i.Point(t,n),c=n instanceof i.Point?n:new i.Point(r,s);super(e.CurveToQuadraticAbs,o,c)}buildInstance(t,e){return new w(t,e)}defaultInstance(){return new w}}t.CurveToQuadraticAbs=w;class P extends o{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r,s){const o=t instanceof i.Point?t:new i.Point(t,n),c=n instanceof i.Point?n:new i.Point(r,s);super(e.CurveToQuadraticRel,o,c)}buildInstance(t,e){return new P(t,e)}defaultInstance(){return new P}}t.CurveToQuadraticRel=P;class y extends r{constructor(t=new i.Point(0,0),n=0){super(e.CurveToQuadraticSmoothAbs,t instanceof i.Point?t:new i.Point(t,n))}buildInstance(t){return new y(t)}defaultInstance(){return new y}}t.CurveToQuadraticSmoothAbs=y;class x extends r{constructor(t=new i.Point(0,0),n=0){super(e.CurveToQuadraticSmoothRel,t instanceof i.Point?t:new i.Point(t,n))}buildInstance(t){return new x(t)}defaultInstance(){return new x}}t.CurveToQuadraticSmoothRel=x;class S extends t{constructor(t,e=new i.Point(0,0),n=new i.Point(0,0),r=0,s=!1,o=!0){super(t),this.r=e,this.p=n,this.xAxisRotate=r,this.largeArc=s,this.sweepClockwise=o}toString(){return`${this.r.toString()} ${this.xAxisRotate} ${this.largeArc?1:0} ${this.sweepClockwise?1:0} ${this.p.toString()}`}parseArgs(t){const e=t.split(" ");return this.buildInstance(this.r.parse(e[0]),this.p.parse(e[4]),parseFloat(e[1]),"1"===e[2],"1"===e[3])}}t.ArcTo=S;class A extends S{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r,s,o,c,u){const a=t instanceof i.Point?t:new i.Point(t,n),l=n instanceof i.Point?n:new i.Point(r,s);let d=0,h=!1,p=!0;t instanceof i.Point&&n instanceof i.Point?(void 0!==r&&(d=r),void 0!==s&&(h=s),void 0!==o&&(p=o)):(void 0!==o&&(d=o),void 0!==c&&(h=c),void 0!==u&&(p=u)),super(e.ArcToAbs,a,l,d,h,p)}buildInstance(t,e,n,r,s){return new A(t,e,n,r,s)}defaultInstance(){return new A}}t.ArcToAbs=A;class T extends S{constructor(t=new i.Point(0,0),n=new i.Point(0,0),r,s,o,c,u){const a=t instanceof i.Point?t:new i.Point(t,n),l=n instanceof i.Point?n:new i.Point(r,s);let d=0,h=!1,p=!0;t instanceof i.Point&&n instanceof i.Point?(void 0!==r&&(d=r),void 0!==s&&(h=s),void 0!==o&&(p=o)):(void 0!==o&&(d=o),void 0!==c&&(h=c),void 0!==u&&(p=u)),super(e.ArcToRel,a,l,d,h,p)}buildInstance(t,e,n,r,s){return new T(t,e,n,r,s)}defaultInstance(){return new T}}t.ArcToRel=T}(o=e.PathSegment||(e.PathSegment={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PreserveAspectRatio=class{constructor(t,e,n){this.x=t,this.y=e,this.meetOrSlice=n}toString(){if(void 0!==this.x&&void 0!==this.y){let t=`x${this.x}Y${this.y}`;return void 0!==this.meetOrSlice&&(t+=" "+this.meetOrSlice),t}return"none"}}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(78)),r(n(33)),r(n(34)),r(n(79)),r(n(35))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);class s extends r.Transform{constructor(t=1,e=0,n=0,r=1,s=0,i=0){super("matrix"),this.a=t,this.b=e,this.c=n,this.d=r,this.e=s,this.f=i}args(){return`${this.a} ${this.b} ${this.c} ${this.d} ${this.e} ${this.f}`}parseArgs(t){if(null!==t){const e=t.split(" ");return new s(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5]))}return new s}}e.Matrix_Transform=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);class s extends r.Transform{constructor(t=0){super("skewX"),this.a=t}args(){return this.a.toString()}parseArgs(t){return null!==t?new s(parseFloat(t)):new s}}e.SkewX_Transform=s;class i extends r.Transform{constructor(t=0){super("skewY"),this.a=t}args(){return this.a.toString()}parseArgs(t){return null!==t?new i(parseFloat(t)):new i}}e.SkewY_Transform=i},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(0)),r(n(81)),r(n(7)),r(n(6));const s=n(82);e.FilterPrimitives=s;const i=n(84);e.NonRenderables=i;const o=n(87);e.Renderables=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3),s=n(47),i=n(48),o=n(49),c=n(50),u=n(51),a=n(52),l=n(53),d=n(54),h=n(55),p=n(56),f=n(57),b=n(58),g=n(59),m=n(60),_=n(61),v=n(62),w=n(63),P=(t,e)=>{const n=Object.create(null);for(const e in t)n[e]=t[e];for(const t in e)n[t]=e[t];return n};e.Filter=class extends r.Element{constructor(t){super(t,"filter"),this.context=t,this._refCounter=0,this.context.addDef(this)}getUniquePrimitiveReference(){return(++this._refCounter).toString()}blend(t,e,n){return new s.Blend_Primitive(this,{in:e,in2:n,mode:t})}colorMatrix(t,e){return new i.ColorMatrix_Primitive(this,{in:e,type:t.type,values:t})}componentTransfer(t,e,n,r,s){const i=new o.ComponentTransfer_Primitive(this,{in:s});return i.add(new o.TransferFunction_Primitive(this,"R",t)),i.add(new o.TransferFunction_Primitive(this,"G",e)),i.add(new o.TransferFunction_Primitive(this,"B",n)),void 0!==r&&i.add(new o.TransferFunction_Primitive(this,"A",r)),i}composite(t,e,n,r,s,i,o){return new c.Composite_Primitive(this,{in:i,in2:o,operator:t,k1:e,k2:n,k3:r,k4:s})}convolveMatrix(t,e){return new u.ConvolveMatrix_Primitive(this,P(t,{in:e}))}diffuseLighting(t,e=[],n){const r=new p.DiffuseLighting(this,P(t,{in:n}));return this.addLights(r,e),r}displacementMap(t,e,n){return new a.DisplacementMap_Primitive(this,P(t,{in:e,in2:n}))}flood(t,e){const n=new l.Flood_Primitive(this,{"flood-color":t});return n.setAttributes({x:e.x,y:e.y,width:e.width,height:e.height}),n}gaussianBlur(t=0,e="duplicate",n){return new d.GaussianBlur_Primitive(this,{in:n,stdDeviation:t,edgeMode:e})}image(t,e){return new h.Image_Primitive(this,{"xlink:href":t,preserveAspectRatio:e})}merge(t){const e=new g.Merge_Primitive(this);return t.forEach(t=>{const n=new g.MergeNode_Primitive(this,{in:t});e.add(n)}),e}morphology(t,e,n){return new m.Morphology_Primitive(this,{in:n,operator:t,radius:e})}offset(t,e){return new _.Offset_Primitive(this,{in:e,dx:t.x,dy:t.y})}specularLighting(t,e=[]){const n=new b.SpecularLighting(this,t);return this.addLights(n,e),n}tile(t,e){const n=new v.Tile_Primitive(this,{in:e});return n.setAttributes({x:t.x,y:t.y,width:t.width,height:t.height}),n}turbulence(t){return new w.Turbulence_Primitive(this,t)}addLights(t,e){e.forEach(e=>{switch(e.type){case"point":t.add(new f.PointLight(this,e));break;case"distant":t.add(new f.DistantLight(this,e));break;case"spot":t.add(new f.SpotLight(this,e))}})}}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(47)),r(n(48)),r(n(49)),r(n(50)),r(n(51)),r(n(52)),r(n(53)),r(n(54)),r(n(55)),r(n(59)),r(n(60)),r(n(61)),r(n(62)),r(n(63));const s=n(83);e.Lighting=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(56)),r(n(58));const s=n(57);e.LightSource=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(26)),r(n(27)),r(n(28)),r(n(18));const s=n(85);e.PaintServers=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(17)),r(n(19));const s=n(86);e.Gradients=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(29)),r(n(30))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(32)),r(n(31)),r(n(36)),r(n(9)),r(n(37)),r(n(4)),r(n(45));const s=n(88);e.Shapes=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(38)),r(n(39)),r(n(40)),r(n(41)),r(n(42)),r(n(43)),r(n(44))}])});