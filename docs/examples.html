<!DOCTYPE HTML>
<html>
  <head>
    <style>
      .ref {
        display: inline-block;
      }
      .ref-frame {
        display: inline-block;
        position: relative;
        height: 250px;
        width: 250px;
        overflow: hidden;
        border: 1px solid black;
      }
      .ref-frame > div {
        position: absolute; 
        right: 0; 
        bottom: 0;
      }
      .live {
        display: inline-block;
      }
      svg {
        border: 1px solid black;
      }
    </style>
    <script src="../dist/SavageDOM.js"></script>
  </head>
  <body>
    <div>
      <div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/color_interpolation.png">
          </div>
        </div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/color_interpolation.svg">
          </div>
        </div>
        <div class="live">
          <svg id="color_interpolation" width="250" height="250"></svg>
          <script src="../test/examples/color_interpolation.js"></script>
          <script>
            window.buildExample["color_interpolation"]("color_interpolation");
          </script>
        </div>
      </div>
      <div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/gradient.png">
          </div>
        </div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/gradient.svg">
          </div>
        </div>
        <div class="live">
          <svg id="gradient" width="250" height="250"></svg>
          <script src="../test/examples/gradient.js"></script>
          <script>
            window.buildExample["gradient"]("gradient");
          </script>
        </div>
      </div>
      <div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/pattern.png">
          </div>
        </div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/pattern.svg">
          </div>
        </div>
        <div class="live">
          <svg id="pattern" width="250" height="250"></svg>
          <script src="../test/examples/pattern.js"></script>
          <script>
            window.buildExample["pattern"]("pattern");
          </script>
        </div>
      </div>
      <div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/shapes.png">
          </div>
        </div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/shapes.svg">
          </div>
        </div>
        <div class="live">
          <svg id="shapes" width="250" height="250"></svg>
          <script src="../test/examples/shapes.js"></script>
          <script>
            window.buildExample["shapes"]("shapes");
          </script>
        </div>
      </div>
      <div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/text.png">
          </div>
        </div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/text.svg">
          </div>
        </div>
        <div class="live">
          <svg id="text" width="250" height="250"></svg>
          <script src="../test/examples/text.js"></script>
          <script>
            window.buildExample["text"]("text");
          </script>
        </div>
      </div>
      <div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/transforms.png">
          </div>
        </div>
        <div class="ref">
          <div class="ref-frame">
            <img src="./examples/transforms.svg">
          </div>
        </div>
        <div class="live">
          <svg id="transforms" width="250" height="250"></svg>
          <script src="../test/examples/transforms.js"></script>
          <script>
            window.buildExample["transforms"]("transforms");
          </script>
        </div>
      </div>
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" width="500" height="500" id="easing"></svg>
    <script>
      let paper = new SavageDOM.Paper("easing");

      let x1 = 50;
      let y1 = 450;
      let x2 = 450;
      let y2 = 50;

      const transformX = (t) => (x2 - x1) * t + x1;
      const transformY = (t) => (y2 - y1) * t + y1;

      let c = paper.circle(10, 10, 5);
      let linear = paper.line(x1, y1, x2, y2);
      linear.setAttributes({ "stroke-width": 1, "stroke": new SavageDOM.Attribute.Color("#000000") });

      let polyline = new SavageDOM.Elements.Renderable.Shape.Polyline(paper, {
        "stroke-width": 2, 
        "fill": new SavageDOM.Attribute.Color("rgb", 0, 0, 0, 0),
        "stroke": new SavageDOM.Attribute.Color("rgb", 255, 0, 0, 0.5),
      });

      let control1 = paper.line(x1, y1, x1, y1);
      control1.setAttributes({
        "stroke-width": 2, 
        "fill": new SavageDOM.Attribute.Color("rgb", 0, 0, 0, 0),
        "stroke": new SavageDOM.Attribute.Color("rgb", 0, 0, 255, 0.5),
      });
      let control2 = paper.line(x2, y2, x2, y2);
      control2.setAttributes({
        "stroke-width": 2, 
        "fill": new SavageDOM.Attribute.Color("rgb", 0, 0, 0, 0),
        "stroke": new SavageDOM.Attribute.Color("rgb", 0, 0, 255, 0.5),
      });

      let mid = paper.line(0, 0, 0, 0);
      mid.setAttributes({
        "stroke-width": 2, 
        "fill": new SavageDOM.Attribute.Color("rgb", 0, 0, 0, 0),
        "stroke": new SavageDOM.Attribute.Color("rgb", 0, 255, 0, 0.5),
      });

      let samples = 100;
      function visualizeEasing(easing) {
        let points = new SavageDOM.Attribute.List();
        for (let i = 0; i <= samples; ++i) {
          let p = i / samples;
          let x = transformX(p);
          let y = transformY(easing(p));
          points.push(new SavageDOM.Attribute.Point(x, y));
        }
        polyline.setAttribute("points", points);
      }

      window.testEasing = function(easing) {
        c.setAttributes({ cx: x1, cy: y1 });
        c.animate({ cx: x2 }, 2000, SavageDOM.Animation.Easing.linear);
        c.animate({ cy: y2 }, 2000, easing);
        visualizeEasing(easing);
      };
    </script>
  </body>
</html>